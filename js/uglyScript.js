function ordinal_suffix_of(e){var t=e%10,r=e%100;return 1==t&&11!=r?e+"st":2==t&&12!=r?e+"nd":3==t&&13!=r?e+"rd":e+"th"}function errorFunction(e,t,r){var a=Parse.Object.extend("ErrorStructure"),n=new a;n.set("deviceToken","Web Client"),n.set("nameString","JavaScript Error"),n.set("infoString","Message = "+e+" - File = "+t+" - Line = "+r),n.set("version","Latest web release."),Parse.User.current()?n.set("username",Parse.User.current().get("username")):n.set("No username."),n.save()}function start(e){return function(){window.imageFile=new Parse.File("image.png",e)}}function startTwo(e){return function(){window.daysArray=e}}function startThree(e){return function(){window.groupsArray=e}}function customView(){return function(){var e=localStorage.getItem("customDate").split("-"),t=new Date(e[2],e[0]-1,e[1]),r=t.toString("dddd, MMMM d, yyyy");$("#topLabel").html("Custom Schedule - "+r),$("#customArea").val(localStorage.getItem("customString")),$("#scheduleDescription").val(localStorage.getItem("customDescription"))}}function loadNewUserTable(){return function(){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e=new Parse.Query("UserRegisterStructure");e.ascending("lastName"),e.find({success:function(e){$("#newLabel").html("New User Requests ("+e.length+")");var t=document.getElementById("newUsers"),r=document.createElement("TABLE"),a=document.createElement("TBODY");$("#newUsers").html(""),r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Last Name",n[1]="First Name",n[2]="E-Mail",n[3]="Action";var o=document.createElement("TR");a.appendChild(o);for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="25%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}window.userArray=new Array;for(var i=0;i<e.length;i++){window.userArray.push(e[i]);var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("lastName"))),o.appendChild(s);var c=document.createElement("TD");c.appendChild(document.createTextNode(e[i].get("firstName"))),o.appendChild(c);var d=document.createElement("TD");d.innerHTML='<a href="mailto:'+e[i].get("email")+'">'+e[i].get("email")+"</a>",o.appendChild(d);var u=document.createElement("TD"),p=document.createElement("INPUT");p.type="button",p.className="approveUser btn btn-lg btn-primary",p.value="Approve",p.name=i,p.style.marginRight="10px",p.onclick=function(){var e=i;return function(t){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to approve this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=window.userArray[e],a=r.get("password"),n=r.get("key");Parse.Cloud.run("decryptPassword",{password:a},{success:function(e){Parse.Cloud.run("registerUser",{username:r.get("username"),password:e,email:r.get("email"),firstName:r.get("firstName"),lastName:r.get("lastName"),key:n},{success:function(){$("#spinnerDiv").html("");var e="User approved!";localStorage.setItem("userAlertString",e),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1431"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1442"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),u.appendChild(p);var g=document.createElement("INPUT");g.type="button",g.className="btn btn-lg btn-primary",g.value="Deny",p.name=i,g.style.marginRight="10px",g.style.backgroundColor="red",g.style.borderColor="red",g.onclick=function(){var e=i;return function(t){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to deny this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=window.userArray[e],a=new Parse.Query("UserRegisterStructure");a.equalTo("username",r.get("username")),a.first({success:function(e){e.destroy({success:function(e){$("#spinnerDiv").html("");var t="User successfully denied account request.";localStorage.setItem("userAlertString",t),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1500"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1511"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),u.appendChild(g),o.appendChild(u),a.appendChild(o),t.appendChild(r)}},error:function(e){alert(e)}})}}function loadExistingUserTable(){return function(){$("#userAlertDiv").css("display","block");var e=localStorage.getItem("userAlertString");e&&e.length>0&&(localStorage.setItem("userAlertString",""),$("#userAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#userAlertDiv").delay(5e3).fadeOut(500));var t=new Parse.Query("User");t.ascending("lastName"),t.find({success:function(e){$("#existingLabel").html("Existing Users ("+e.length+")");var t=document.getElementById("existingUsers"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="userTable";var n=new Array;n[0]="Last Name",n[1]="First Name",n[2]="E-Mail",n[3]="User Type",n[4]="Change Type",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#existingUsers").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="17%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}window.existingUserArray=new Array;for(var i=0;i<e.length;i++){window.existingUserArray.push(e[i]);var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("lastName"))),o.appendChild(s);var c=document.createElement("TD");c.appendChild(document.createTextNode(e[i].get("firstName"))),o.appendChild(c);var d=document.createElement("TD");d.innerHTML='<a href="mailto:'+e[i].get("email")+'">'+e[i].get("email")+"</a>",o.appendChild(d);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("userType"))),o.appendChild(u);var p=document.createElement("TD"),g=document.createElement("SELECT");g.name="typeSelect";var m=document.createElement("option");m.value=-1,m.text="NONE SELECTED",g.appendChild(m);for(var h=["Developer","Administration","Faculty","Lunch Manager","Student"],v=0;v<h.length;v++){var m=document.createElement("option");m.value=v,m.text=h[v],g.appendChild(m)}g.onchange=function(){var t=i;return function(r){var a=this.selectedIndex-1;BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to update this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){if(r){var n=h[a];$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("updateType",{username:e[t].get("username"),type:n},{success:function(){$("#spinnerDiv").html("");var e="User successfully updated.";localStorage.setItem("userAlertString",e),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1659"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),p.appendChild(g),o.appendChild(p);var y=document.createElement("TD"),f=document.createElement("INPUT");f.type="button",f.className="btn btn-lg btn-primary",f.value="Delete",f.name=i,f.style.marginRight="10px",f.style.backgroundColor="red",f.style.borderColor="red",f.onclick=function(){var e=i;return function(t){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=window.existingUserArray[e];r.get("username")!=Parse.User.current().get("username").toString()?($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("deleteUser",{username:r.get("username")},{success:function(){$("#spinnerDiv").html("");var e="User successfully deleted.";$("#userAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#userAlertDiv").delay(5e3).fadeOut(500),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1718"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})):(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Whoops! You cannot delete yourself as a user."}),$("#spinnerDiv").html(""))}}})}}(),y.appendChild(f),o.appendChild(y),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){alert(e)}})}}function loadLunchTable(){return function(){$("#lunchAlertDiv").css("display","block");var e=localStorage.getItem("lunchAlertString");e&&e.length>0&&(localStorage.setItem("lunchAlertString",""),$("#lunchAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#lunchAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("SchoolDayStructure");t.equalTo("isActive",1),t.ascending("schoolDayID");new Array;t.find({success:function(e){$("#titleLabel").html("Available School Days ("+e.length+")");var t=document.getElementById("schedules"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Date",n[1]="Breakfast",n[2]="Lunch";var o=document.createElement("TR");a.appendChild(o),$("#schedules").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");0==i?l.width="20%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].get("schoolDate").split("-"),d=new Date(c[2],c[0]-1,c[1]),u=d.toString("dddd, MMMM d, yyyy");s.appendChild(document.createTextNode(u)),o.appendChild(s);var p=document.createElement("TD"),g=document.createElement("TEXTAREA");g.value=e[i].get("breakfastString"),g["class"]="form-control",g.style.display="block",g.style.width="100%",g.style.overflowY="scroll",g.style.resize="none",g.id="b_"+i,g.maxLength=80,p.appendChild(g),o.appendChild(p);var m=document.createElement("TD"),h=document.createElement("TEXTAREA");h.value=e[i].get("lunchString"),h["class"]="form-control",h.style.display="block",h.style.width="100%",h.style.overflowY="scroll",h.style.resize="none",h.id="l_"+i,h.maxLength=80,m.appendChild(h),o.appendChild(m),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1845"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadExistingNewsTable(){return function(){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e=new Parse.Query("NewsArticleStructure");e.equalTo("isApproved",1),e.ascending("createdAt");new Array;e.find({success:function(e){$("#existingLabel").html("Current Active Wildcat News Stories ("+e.length+")");var t=document.getElementById("currentNews"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="newsTable";var n=new Array;n[0]="Date Submitted",n[1]="Author",n[2]="Title",n[3]="Content",n[4]="Action";var o=document.createElement("TR");a.appendChild(o),$("#currentNews").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="15%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].createdAt,d=c.toString("dddd, MMMM d, yyyy @ h:mm tt");s.appendChild(document.createTextNode(d)),o.appendChild(s);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("authorString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(u);var u=document.createElement("TD"),p=document.createElement("INPUT");p.type="button",p.className="btn btn-lg btn-primary",p.value="View Content",p.name=i,p.style.marginRight="10px",p.onclick=function(){var t=i;return function(r){var a=e[t].get("titleString"),n=e[t].get("summaryString"),o=e[t].get("authorString")+" | "+e[t].get("dateString"),i=e[t].get("contentURLString");i=i.replace(/\r?\n/g,"<br />");var l=e[t].get("imageFile").url();BootstrapDialog.show({title:"Article Preview",size:BootstrapDialog.SIZE_WIDE,message:function(e){var t=$("<form></form>");return t.append('<h1 style="margin-top:0;">'+a+"</h1><h4><i>"+n+"</i></h4><h5>"+o+"</h5>"),l&&t.append('<img src="'+l+'" style="width:50%;display:block;margin: 0 auto;">'),t.append('<hr style="border-color:#561838">'+i),t},closable:!0,draggable:!0,buttons:[{label:"OK",action:function(e){e.close()}}]})}}(),u.appendChild(p),o.appendChild(u);var g=document.createElement("TD"),m=document.createElement("INPUT");m.type="button",m.className="btn btn-lg btn-primary",m.value="Delete",m.style.marginRight="10px",m.style.backgroundColor="red",m.style.borderColor="red",m.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this story?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Story successfully deleted.";localStorage.setItem("newsAlertString",e),$(document).ready(loadNewsTable()),$(document).ready(loadExistingNewsTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2379"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),g.appendChild(m),o.appendChild(g),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2047"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadNewsTable(){return function(){$("#newsAlertDiv").css("display","block");var e=localStorage.getItem("newsAlertString");e&&e.length>0&&(localStorage.setItem("newsAlertString",""),$("#newsAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#newsAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("NewsArticleStructure");t.equalTo("isApproved",0),t.ascending("createdAt");new Array;t.find({success:function(e){$("#titleLabel").html("Pending Wildcat News Requests ("+e.length+")");var t=document.getElementById("newsRequests"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Date Submitted",n[1]="Author",n[2]="Title",n[3]="Content",n[4]="Action";var o=document.createElement("TR");a.appendChild(o),$("#newsRequests").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="15%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].createdAt,d=c.toString("dddd, MMMM d, yyyy @ h:mm tt");s.appendChild(document.createTextNode(d)),o.appendChild(s);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("authorString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(u);var u=document.createElement("TD"),p=document.createElement("INPUT");p.type="button",p.className="btn btn-lg btn-primary",p.value="View Content",p.name=i,p.style.marginRight="10px",p.onclick=function(){var t=i;return function(r){var a=e[t].get("titleString"),n=e[t].get("summaryString"),o=e[t].get("authorString")+" | "+e[t].get("dateString"),i=e[t].get("contentURLString");i=i.replace(/\r?\n/g,"<br />");var l=null;e[t].get("imageFile")&&(l=e[t].get("imageFile").url()),BootstrapDialog.show({title:"Article Preview",size:BootstrapDialog.SIZE_WIDE,message:function(e){var t=$("<form></form>");return t.append('<h1 style="margin-top:0;">'+a+"</h1><h4><i>"+n+"</i></h4><h5>"+o+"</h5>"),l&&t.append('<img src="'+l+'" style="width:50%;display:block;margin: 0 auto;">'),t.append('<hr style="border-color:#561838">'+i),t},closable:!0,draggable:!0,buttons:[{label:"OK",action:function(e){e.close()}}]})}}(),u.appendChild(p),o.appendChild(u);var g=document.createElement("TD"),m=document.createElement("INPUT");m.type="button",m.className="approveUser btn btn-lg btn-primary",m.value="Approve",m.name=i,m.style.marginRight="10px",m.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to approve this Wildcat News Story? It will be live to all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].set("isApproved",1),e[t].save({success:function(){$("#spinnerDiv").html("");var e="Story successfully approved.";localStorage.setItem("newsAlertString",e),$(document).ready(loadNewsTable()),$(document).ready(loadExistingNewsTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1969"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),g.appendChild(m);var h=document.createElement("INPUT");h.type="button",h.className="btn btn-lg btn-primary",h.value="Deny",m.name=i,h.style.marginRight="10px",h.style.backgroundColor="red",h.style.borderColor="red",h.onclick=function(){var t=i;return function(r){var a=e[t].get("userString"),r=e[t].get("email"),n=e[t].get("titleString"),o=Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName");BootstrapDialog.show({title:"Confirmation",message:function(e){var t=$("<form></form>"),r=$('<textarea maxlength="400" rows="4" style="overflow-y: scroll; resize: none; width:100%;"></textarea>');return e.setData("message",r),t.append("Are you sure you want to deny this Wildcat News Story? Please enter a brief message explaining the reason for the denial. This will be sent in an e-mail to the story's creator, "+a+".<br><br><label>Message</label><br>").append(r),t},closable:!1,draggable:!0,buttons:[{label:"Cancel",action:function(e){e.close()}},{label:"Deny",cssClass:"btn-primary",action:function(i){var l=i.getData("message").val();$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("denyStructure",{name:a,type:"news",email:r,message:l,title:n,admin:o},{success:function(){e[t].destroy({success:function(){$("#spinnerDiv").html(""),i.close();var e="Story successfully denied.";localStorage.setItem("newsAlertString",e),$(document).ready(loadNewsTable()),$(document).ready(loadExistingNewsTable())},error:function(e){i.close(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2020"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){i.close(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1659"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}]})}}(),g.appendChild(h),o.appendChild(g),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2047"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadEventTable(){return function(){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e=new Parse.Query("EventStructure");e.equalTo("isApproved",0),e.ascending("createdAt");new Array;e.find({success:function(e){$("#titleLabel").html("Pending Event Requests ("+e.length+")");var t=document.getElementById("eventRequests"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Title",n[1]="Date",n[2]="Location",n[3]="Message",n[4]="User",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#eventRequests").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");3!=i?l.width="12%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(s);var c=document.createElement("TD"),d=e[i].get("eventDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("locationString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("messageString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("userString"))),o.appendChild(s);var p=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="approveUser btn btn-lg btn-primary",g.value="Approve",g.name=i,g.style.marginBottom="10px",g.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to approve this event? It will be live to all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].set("isApproved",1),e[t].save({success:function(){$("#spinnerDiv").html("");var e="Event successfully approved.";localStorage.setItem("eventAlertString",e),$(document).ready(loadEventTable()),$(document).ready(loadExistingEventTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2169"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),p.appendChild(g);var m=document.createElement("INPUT");m.type="button",m.className="btn btn-lg btn-primary",m.value="Deny",g.name=i,m.style.marginRight="10px",m.style.backgroundColor="red",m.style.borderColor="red",m.onclick=function(){var t=i;return function(r){var a=e[t].get("userString"),r=e[t].get("email"),n=e[t].get("titleString"),o=Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName");BootstrapDialog.show({title:"Confirmation",message:function(e){var t=$("<form></form>"),r=$('<textarea maxlength="400" rows="4" style="overflow-y: scroll; resize: none; width:100%;"></textarea>');return e.setData("message",r),t.append("Are you sure you want to deny this event? Please enter a brief message explaining the reason for the denial. This will be sent in an e-mail to the event's creator, "+a+".<br><br><label>Message</label><br>").append(r),t},closable:!1,draggable:!0,buttons:[{label:"Cancel",action:function(e){e.close()}},{label:"Deny",cssClass:"btn-primary",action:function(i){var l=i.getData("message").val();$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("denyStructure",{name:a,type:"event",email:r,message:l,title:n,admin:o},{success:function(){e[t].destroy({success:function(){$("#spinnerDiv").html(""),i.close();var e="Event successfully denied.";localStorage.setItem("eventAlertString",e),$(document).ready(loadEventTable()),$(document).ready(loadExistingEventTable())},error:function(e){i.close(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2020"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){i.close(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1659"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}]})}}(),p.appendChild(m),o.appendChild(p),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2248"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadExistingEventTable(){return function(){$("#eventAlertDiv").css("display","block");var e=localStorage.getItem("eventAlertString");e&&e.length>0&&(localStorage.setItem("eventAlertString",""),$("#eventAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#eventAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("EventStructure");t.equalTo("isApproved",1),t.ascending("eventDate");new Array;t.find({success:function(e){$("#existingLabel").html("Current Active Events ("+e.length+")");var t=document.getElementById("currentEvents"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="eventTable";var n=new Array;n[0]="Title",n[1]="Date",n[2]="Location",n[3]="Message",n[4]="User",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#currentEvents").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");3!=i?l.width="12%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(s);var c=document.createElement("TD"),d=e[i].get("eventDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("locationString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("messageString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("userString"))),o.appendChild(s);var p=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="btn btn-lg btn-primary",g.value="Delete",g.style.marginRight="10px",g.style.backgroundColor="red",g.style.borderColor="red",g.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this event?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Event successfully deleted.";localStorage.setItem("eventAlertString",e),$(document).ready(loadEventTable()),$(document).ready(loadExistingEventTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2379"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),p.appendChild(g),o.appendChild(p),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2406"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadCommunityTable(){return function(){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e=new Parse.Query("CommunityServiceStructure");e.equalTo("isApproved",0),e.ascending("startDate");new Array;e.find({success:function(e){$("#titleLabel").html("Pending Community Service Requests ("+e.length+")");var t=document.getElementById("communityRequests"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Title",n[1]="Start Date",n[2]="End Date",
n[3]="Message",n[4]="User",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#communityRequests").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");3!=i?l.width="12%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("commTitleString"))),o.appendChild(s);var c=document.createElement("TD"),d=e[i].get("startDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var c=document.createElement("TD"),d=e[i].get("endDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("commSummaryString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("userString"))),o.appendChild(s);var p=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="approveUser btn btn-lg btn-primary",g.value="Approve",g.name=i,g.style.marginBottom="10px",g.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to approve this opportunity? It will be live to all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].set("isApproved",1),e[t].save({success:function(){$("#spinnerDiv").html("");var e="Opportunity successfully approved.";localStorage.setItem("commAlertString",e),$(document).ready(loadCommunityTable()),$(document).ready(loadExistingCommunityTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2169"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),p.appendChild(g);var m=document.createElement("INPUT");m.type="button",m.className="btn btn-lg btn-primary",m.value="Deny",g.name=i,m.style.marginRight="10px",m.style.backgroundColor="red",m.style.borderColor="red",m.onclick=function(){var t=i;return function(r){var a=e[t].get("userString"),r=e[t].get("email"),n=e[t].get("titleString"),o=Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName");BootstrapDialog.show({title:"Confirmation",message:function(e){var t=$("<form></form>"),r=$('<textarea maxlength="400" rows="4" style="overflow-y: scroll; resize: none; width:100%;"></textarea>');return e.setData("message",r),t.append("Are you sure you want to deny this opportunity? Please enter a brief message explaining the reason for the denial. This will be sent in an e-mail to the opportunity's creator, "+a+".<br><br><label>Message</label><br>").append(r),t},closable:!1,draggable:!0,buttons:[{label:"Cancel",action:function(e){e.close()}},{label:"Deny",cssClass:"btn-primary",action:function(i){var l=i.getData("message").val();$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("denyStructure",{name:a,type:"comm",email:r,message:l,title:n,admin:o},{success:function(){e[t].destroy({success:function(){$("#spinnerDiv").html(""),i.close();var e="Opportunity successfully denied.";localStorage.setItem("commAlertString",e),$(document).ready(loadCommunityTable()),$(document).ready(loadExistingCommunityTable())},error:function(e){i.close(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2020"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){i.close(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1659"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}]})}}(),p.appendChild(m),o.appendChild(p),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2248"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadExistingCommunityTable(){return function(){$("#communityAlertDiv").css("display","block");var e=localStorage.getItem("commAlertString");e&&e.length>0&&(localStorage.setItem("commAlertString",""),$("#communityAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#communityAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("CommunityServiceStructure");t.equalTo("isApproved",1),t.ascending("startDate");new Array;t.find({success:function(e){$("#existingLabel").html("Current Active Community Service Opportunities ("+e.length+")");var t=document.getElementById("currentCommunity"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="communityTable";var n=new Array;n[0]="Title",n[1]="Start Date",n[2]="End Date",n[3]="Message",n[4]="User",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#currentCommunity").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");3!=i?l.width="12%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("commTitleString"))),o.appendChild(s);var c=document.createElement("TD"),d=e[i].get("startDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var c=document.createElement("TD"),d=e[i].get("endDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("commSummaryString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("userString"))),o.appendChild(s);var p=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="btn btn-lg btn-primary",g.value="Delete",g.style.marginRight="10px",g.style.backgroundColor="red",g.style.borderColor="red",g.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this opportunity?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Opportunity successfully deleted.";localStorage.setItem("commAlertString",e),$(document).ready(loadCommunityTable()),$(document).ready(loadExistingCommunityTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2379"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),p.appendChild(g),o.appendChild(p),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2406"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadGroupTable(){return function(){$("#groupAlertDiv").css("display","block");var e=localStorage.getItem("groupAlertString");e&&e.length>0&&(localStorage.setItem("groupAlertString",""),$("#groupAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#groupAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("ExtracurricularStructure");if(t.ascending("titleString"),!Parse.User.current()||"Developer"!==Parse.User.current().get("userType")&&"Administration"!==Parse.User.current().get("userType")){var r=Parse.User.current().get("ownedEC");t.containedIn("extracurricularID",r)}else;new Array;t.find({success:function(e){$("#titleLabel").html("Currently Registered Groups ("+e.length+")");var t=document.getElementById("groups"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="groupTable";var n=new Array;n[0]="Title",n[1]="Owner",n[2]="Description",n[3]="Action";var o=document.createElement("TR");a.appendChild(o),$("#groups").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");2==i?l.width="40%":l.width="20%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("userString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("descriptionString"))),o.appendChild(s);var c=document.createElement("TD"),d=document.createElement("INPUT");d.type="button",d.className="btn btn-lg btn-primary",d.value="Edit",d.name=i,d.style.marginRight="10px",d.onclick=function(){var t=i;return function(r){var a=e[t].get("titleString"),n=e[t].get("descriptionString");BootstrapDialog.show({title:"Edit Group",message:function(e){var t=$("<form></form>"),r=$('<input type="text" style="width:80%;" maxlength="40">');r.val(a),e.setData("title",r),t.append("Group Title  ").append(r);var o=$('<textarea maxlength="400" rows="4" style="overflow-y: scroll; resize: none; width:100%;"></textarea>');return o.val(n),e.setData("message",o),t.append("<br><br>Group Description<br><br>").append(o),t},closable:!1,draggable:!0,buttons:[{label:"Cancel",action:function(e){e.close()}},{label:"Save",cssClass:"btn-primary",action:function(r){var a=r.getData("title").val(),n=r.getData("message").val();$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].set("titleString",a),e[t].set("descriptionString",n),e[t].save(null,{success:function(e){r.close(),$("#spinnerDiv").html("");var t="Group successfully updated.";localStorage.setItem("groupAlertString",t),$(document).ready(loadGroupTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2514"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}]})}}(),c.appendChild(d);var u=document.createElement("INPUT");u.type="button",u.className="btn btn-lg btn-primary",u.value="Delete",u.style.marginRight="10px",u.style.backgroundColor="red",u.style.borderColor="red",u.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this group?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Group successfully deleted.";localStorage.setItem("groupAlertString",e),$(document).ready(loadGroupTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2514"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),c.appendChild(u),o.appendChild(c),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function backFunction(){BootstrapDialog.show({title:"Developer Access",message:function(e){var t=$("<form></form>"),r=$('<input type="password" style="width:100%;">');return t.append("Developer Password<br><br>").append(r),e.setData("password",r),t},closable:!1,draggable:!0,buttons:[{label:"Cancel",action:function(e){e.close()}},{label:"Enter",cssClass:"btn-primary",action:function(e){var t=e.getData("password").val(),r=new Parse.Query("SpecialKeyStructure");r.equalTo("key","appActive"),r.first({success:function(r){r.get("password")===t?($("#spinnerDiv").html(""),e.close(),localStorage.setItem("bypass",1),location.reload()):($("#spinnerDiv").html(""),e.close())},error:function(t){alert(t.code+" - "+t.message),e.close()}})}}]})}function startFunction(){if(Parse.User.current()){var e=new Parse.Query("SpecialKeyStructure");e.equalTo("key","appActive"),e.first({success:function(e){"0"===e.get("value")&&1!=localStorage.getItem("bypass")?("Developer"===Parse.User.current().get("userType")?$(".main-container").html($("#appInactive").html()+$("#pureDev").html()):$(".main-container").html($("#appInactive").html()),$("#messageLabel").html("MESSAGE - "+e.get("message"))):($(".main-container").html($("#main-login").html()),homeFunction())},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred."})}})}else window.location.replace("./login")}function homeFunction(){if(localStorage.setItem("bypass",0),Parse.User.current()){if("Administration"===Parse.User.current().get("userType")||"Developer"===Parse.User.current().get("userType")){"Administration"===Parse.User.current().get("userType")?$(".main-container").html($("#admin").html()):$(".main-container").html($("#dev").html()),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e=new Parse.Query("UserRegisterStructure");e.count({success:function(e){1==e?($("#newButton").html("User Management ("+e+")"),$("#newButton").css("background-color","red"),$("#newButton").css("border-color","red")):e>1&&($("#newButton").html("User Management ("+e+")"),$("#newButton").css("background-color","red"),$("#newButton").css("border-color","red"))},error:function(e){100!=e.code&&alert(e.code+" - "+e.message),$("#spinnerDiv").html("")}});var t=new Parse.Query("ErrorStructure");t.count({success:function(e){1==e?($("#errorButton").html("Error Management ("+e+")"),$("#errorButton").css("background-color","red"),$("#errorButton").css("border-color","red")):e>1&&($("#errorButton").html("Error Management ("+e+")"),$("#errorButton").css("background-color","red"),$("#errorButton").css("border-color","red"))},error:function(e){100!=e.code&&alert(e.code+" - "+e.message),$("#spinnerDiv").html("")}});var r=new Parse.Query("NewsArticleStructure");r.equalTo("isApproved",0),r.count({success:function(e){1==e?($("#newsApproveButton").html("News Management ("+e+")"),$("#newsApproveButton").css("background-color","red"),$("#newsApproveButton").css("border-color","red")):e>1&&($("#newsApproveButton").html("News Management ("+e+")"),$("#newsApproveButton").css("background-color","red"),$("#newsApproveButton").css("border-color","red"))},error:function(e){100!=e.code&&alert(e.code+" - "+e.message),$("#spinnerDiv").html("")}});var a=new Parse.Query("EventStructure");a.equalTo("isApproved",0),a.count({success:function(e){1==e?($("#eventApproveButton").html("Event Management ("+e+")"),$("#eventApproveButton").css("background-color","red"),$("#eventApproveButton").css("border-color","red")):e>1&&($("#eventApproveButton").html("Event Management ("+e+")"),$("#eventApproveButton").css("background-color","red"),$("#eventApproveButton").css("border-color","red")),$("#spinnerDiv").html("")},error:function(e){100!=e.code&&alert(e.code+" - "+e.message),$("#spinnerDiv").html("")}});var n=new Parse.Query("CommunityServiceStructure");n.equalTo("isApproved",0),n.count({success:function(e){e>0&&($("#commButton").html("Community Management ("+e+")"),$("#commButton").css("background-color","red"),$("#commButton").css("border-color","red")),$("#spinnerDiv").html("")},error:function(e){100!=e.code&&alert(e.code+" - "+e.message),$("#spinnerDiv").html("")}})}else"Faculty"===Parse.User.current().get("userType")?$(".main-container").html($("#faculty").html()):"Lunch Manager"===Parse.User.current().get("userType")&&$(".main-container").html($("#lunch").html());$("#welcomeLabel").html("Welcome, "+Parse.User.current().get("firstName")+"!"),$("#nameLabel").html("Logged in as "+Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName")+" - "+Parse.User.current().get("userType"));var e=new Parse.Query("SpecialKeyStructure");e.equalTo("key","appMessage"),e.first({success:function(e){if("None."!=e.get("value")){var t=e.get("value");t&&t.length>0&&$("#alertDiv").html('<div class="alert alert-danger fade in"><strong>MESSAGE - '+t+"</strong></div>")}},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred."})}})}else window.location.replace("./login")}function changeFunction(){var e=$("select[name='modeSelect'] option:selected").index();if(0==e)BootstrapDialog.show({title:"Deactivate Application",message:function(e){var t=$("<form></form>"),r=$('<input type="password" style="width:100%;">');t.append("Application Password<br><br>").append(r);var a=$('<textarea maxlength="200" rows="3" style="overflow-y: scroll; resize: none; width:100%;"></textarea>');return e.setData("message",a),e.setData("password",r),t.append("<br><br>Deactivation Message/Reason<br><br>").append(a),t},closable:!1,draggable:!0,buttons:[{label:"Cancel",action:function(e){e.close()}},{label:"Deactivate",cssClass:"btn-primary",action:function(t){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to deactivate the application? This will go into effect immediately and disable both the iOS and web clients.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){if(r){var a=t.getData("password").val(),n=t.getData("message").val();if(0==n.length)BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"You must enter a valid deactivation message for users."});else{var o=new Parse.Query("SpecialKeyStructure");o.equalTo("key","appActive"),o.first({success:function(r){r.get("password")===a?(r.set("value",e.toString()),r.set("message",n),r.save(null,{success:function(){$("#modeLabel").html(arrayList[e]),$("#spinnerDiv").html(""),t.close()},error:function(e){alert(e.code+" - "+e.message),t.close()}})):(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Invalid password."}),$("#spinnerDiv").html(""),t.close())},error:function(e){alert(e.code+" - "+e.message),t.close()}})}}}})}}]});else{$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("SpecialKeyStructure");t.equalTo("key","appActive"),t.first({success:function(t){t.set("value",e.toString()),t.save(null,{success:function(){$("#modeLabel").html(arrayList[e]),$("#spinnerDiv").html("")},error:function(e){alert(e.code+" - "+e.message)}})},error:function(e){alert(e.code+" - "+e.message)}})}}function loadAlertTable(){return function(){$("#theAlertDiv").css("display","block");var e=localStorage.getItem("theAlertString");e&&e.length>0&&(localStorage.setItem("theAlertString",""),$("#theAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#theAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("AlertStructure");t.descending("createdAt");new Array;t.find({success:function(e){$("#titleLabel").html("Recently Posted Alerts ("+e.length+")");var t=document.getElementById("alerts"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="alertTable";var n=new Array;n[0]="Date Posted",n[1]="Title",n[2]="Author",n[3]="Content",n[4]="Views",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#alerts").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="19%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].createdAt;string=c.toString("dddd, MMMM d, yyyy @ h:mm tt"),s.appendChild(document.createTextNode(string)),o.appendChild(s);var d=document.createElement("TD");d.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(d);var d=document.createElement("TD");d.appendChild(document.createTextNode(e[i].get("authorString"))),o.appendChild(d);var d=document.createElement("TD"),u=document.createElement("INPUT");u.type="button",u.className="btn btn-lg btn-primary",u.value="View Content",u.name=i,u.style.marginRight="10px",u.onclick=function(){var t=i;return function(r){var a=e[t].get("titleString"),n=e[t].get("authorString")+" | "+e[t].get("dateString"),o=e[t].get("contentString");o=o.replace(/\r?\n/g,"<br />"),BootstrapDialog.show({title:"Alert Preview",size:BootstrapDialog.SIZE_WIDE,message:function(e){var t=$("<form></form>");return t.append('<h1 style="margin-top:0;">'+a+"</h1><h5>"+n+"</h5>"),t.append('<hr style="border-color:#561838">'+o),t},closable:!0,draggable:!0,buttons:[{label:"OK",action:function(e){e.close()}}]})}}(),d.appendChild(u),o.appendChild(d);var d=document.createElement("TD");d.appendChild(document.createTextNode(e[i].get("views"))),o.appendChild(d);var p=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="btn btn-lg btn-primary",g.value="Delete",g.style.marginRight="10px",g.style.backgroundColor="red",g.style.borderColor="red",g.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this alert?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Alert successfully deleted.";localStorage.setItem("theAlertString",e),$(document).ready(loadAlertTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2514"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),p.appendChild(g),o.appendChild(p),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function loadPollTable(){return function(){$("#pollAlertDiv").css("display","block");var e=localStorage.getItem("pollAlertString");e&&e.length>0&&(localStorage.setItem("pollAlertString",""),$("#pollAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#pollAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("PollStructure");t.descending("createdAt");new Array;t.find({success:function(e){$("#titleLabel").html("Recently Posted Polls ("+e.length+")");var t=document.getElementById("polls"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="pollTable";var n=new Array;n[0]="Date Posted",n[1]="Title",n[2]="Question",n[3]="Total Votes",n[4]="View Content",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#polls").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="19%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].createdAt;string=c.toString("dddd, MMMM d, yyyy @ h:mm tt"),s.appendChild(document.createTextNode(string)),o.appendChild(s);var d=document.createElement("TD");d.appendChild(document.createTextNode(e[i].get("pollTitle"))),o.appendChild(d);var d=document.createElement("TD");d.appendChild(document.createTextNode(e[i].get("pollQuestion"))),o.appendChild(d);var d=document.createElement("TD");d.appendChild(document.createTextNode(e[i].get("totalResponses"))),o.appendChild(d);var d=document.createElement("TD"),u=document.createElement("INPUT");u.type="button",u.className="btn btn-lg btn-primary",u.value="View Responses",u.name=i,u.style.marginRight="10px",u.onclick=function(){var t=i;return function(r){var a=e[t].get("pollTitle"),n=e[t].get("pollQuestion"),o="",i=e[t].get("totalResponses"),l=e[t].get("pollMultipleChoices");for(var s in l){var c=Math.round(parseInt(l[s])/i*100*10)/10;o=o+s+" - "+c.toString()+"%\n"}o=o.replace(/\n/g,"<br />"),BootstrapDialog.show({title:"Poll Preview",size:BootstrapDialog.SIZE_WIDE,message:function(e){var t=$("<form></form>");return t.append('<h1 style="margin-top:0;">'+a+"</h1><h3><i>"+n+"</i></h3>"),t.append('<hr style="border-color:#561838">'+o),t},closable:!0,draggable:!0,buttons:[{label:"OK",action:function(e){e.close()}}]})}}(),d.appendChild(u),o.appendChild(d);var p=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="btn btn-lg btn-primary",g.value="Delete",g.style.marginRight="10px",g.style.backgroundColor="red",g.style.borderColor="red",g.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this poll?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Poll successfully deleted.";localStorage.setItem("pollAlertString",e),$(document).ready(loadPollTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2514"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),p.appendChild(g),o.appendChild(p),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function loadErrorTable(){return function(){$("#errorAlertDiv").css("display","block");var e=localStorage.getItem("errorAlertString");e&&e.length>0&&(localStorage.setItem("errorAlertString",""),$("#errorAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#errorAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("ErrorStructure");t.descending("createdAt"),t.find({success:function(e){$("#titleLabel").html("Recent iOS/Web App Errors and Crashes ("+e.length+")");var t=document.getElementById("errors"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Date",n[1]="Name",n[2]="Message",n[3]="Device Token",n[4]="Username",n[5]="Version",n[6]="Action";var o=document.createElement("TR");a.appendChild(o),$("#errors").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="14%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].createdAt,d=c.toString("dddd, MMMM d, yyyy @ h:mm tt");s.appendChild(document.createTextNode(d)),o.appendChild(s);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("nameString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("infoString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("deviceToken"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("username"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("version"))),o.appendChild(u);var u=document.createElement("TD"),p=document.createElement("INPUT");p.type="button",p.className="btn btn-lg btn-primary",p.value="Delete",p.name=i,p.style.marginBottom="10px",p.style.backgroundColor="red",p.style.borderColor="red",p.onclick=function(){var t=i;return function(r){e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Error successfully deleted.";localStorage.setItem("errorAlertString",e),$(document).ready(loadErrorTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2639"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}(),u.appendChild(p),o.appendChild(u),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function loadLinksTable(){return function(){$("#linksAlertDiv").css("display","block");var e=localStorage.getItem("linksAlertString");e&&e.length>0&&(localStorage.setItem("linksAlertString",""),$("#linksAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#linksAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("UsefulLinkArray");t.ascending("index"),t.find({success:function(e){var t=document.getElementById("links");$("#links").html("");for(var r=0;r<e.length;r++){var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete Category",a.name=r,a.id="deleteCategory_"+r,a.style["float"]="right",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this category?",type:BootstrapDialog.TYPE_DANGER,
closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&deleteCategoryFunction(t)}})}}(),t.appendChild(a);var n=document.createElement("H4");n.innerHTML="Category Name",n.style["float"]="left",n.style.marginRight="10px",n.id="label_"+r,t.appendChild(n);var o=document.createElement("TEXTAREA");o.value=e[r].get("headerTitle"),o["class"]="form-control",o.style.display="block",o.id="header_"+r,o.width="33%",o.display="block",o.style.marginBottom="10px",t.appendChild(o);var i=document.createElement("TABLE");i.id="bigTable_"+r;var l=document.createElement("TBODY");l.id="table_"+r,i.appendChild(l),i.className="table table-striped";var s=new Array;s[0]="Link Title",s[1]="Hyperlink",s[2]="Action";var c=document.createElement("TR");l.appendChild(c);for(var d=0;d<s.length;d++){var u=document.createElement("TH");2>d?u.width="40%":u.width="20%",u.appendChild(document.createTextNode(s[d])),c.appendChild(u)}for(var p=e[r].get("linksArray"),g=0;g<p.length;g++){var c=document.createElement("TR");c.id="row_"+r+"_"+g;var m=p[g],h=document.createElement("TD"),v=document.createElement("TEXTAREA");v.value=m.titleString,v["class"]="form-control",v.style.display="block",v.style.width="100%",v.style.overflowY="scroll",v.style.resize="none",v.id="title_"+r+"_"+g,h.appendChild(v),c.appendChild(h);var h=document.createElement("TD"),y=document.createElement("TEXTAREA");y.value=m.URLString,y["class"]="form-control",y.style.display="block",y.style.width="100%",y.style.overflowY="scroll",y.style.resize="none",y.id="link_"+r+"_"+g,h.appendChild(y),c.appendChild(h);var h=document.createElement("TD");h.id="box_"+r+"_"+g;var a=document.createElement("INPUT");if(a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete",a.name=r,a.id="delete_"+r+"_"+g,a.style.marginRight="10px",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this link?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&removeRowFunction(t)}})}}(),h.appendChild(a),g==p.length-1){var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Add Link",a.id="add_"+r,a.onclick=function(){return function(e){addRowFunction($(this))}}(),h.appendChild(a),c.appendChild(h),l.appendChild(c)}c.appendChild(h),l.appendChild(c),t.appendChild(i)}}var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Add a New Category",a.name=r,a.style.marginBottom="10px",a.id="addCategory",a.onclick=function(){return function(e){addCategoryFunction()}}(),t.appendChild(a),$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function getDesiredIndex(e,t){if(0==t){var r,a=e.indexOf("_"),n=e.substring(a+1),o=n.indexOf("_");r=-1==o?n:n.substring(0,o);var i=parseInt(r);return i}if(1==t){var a=e.indexOf("_"),n=e.substring(a+1),o=n.indexOf("_"),r=n.substring(o+1),i=parseInt(r);return i}return-1}function deleteCategoryFunction(e){for(var t=e.attr("id"),r=getDesiredIndex(t,0),a=document.getElementById("bigTable_"+r),n=document.getElementById("links"),o=n.getElementsByTagName("textarea"),i=0;i<o.length;i++){var l=o[i].id;if(l)if(0==l.indexOf("title")){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(o[i].id="title_"+(s-1).toString()+"_"+c.toString())}else if(0==l.indexOf("link")){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(o[i].id="link_"+(s-1).toString()+"_"+c.toString())}else if(0==l.indexOf("header")){var s=getDesiredIndex(l,0);s>r&&(o[i].id="header_"+(s-1).toString())}}for(var d=n.getElementsByTagName("h4"),u=0;u<d.length;u++){var l=d[u].id;if(l&&0==l.indexOf("label")){var s=getDesiredIndex(l,0);s>r&&(d[u].id="label_"+(s-1).toString())}}for(var p=n.getElementsByTagName("table"),g=0;g<p.length;g++){var l=p[g].id;if(l&&0==l.indexOf("bigTable")){var s=getDesiredIndex(l,0);s>r&&(p[g].id="bigTable_"+(s-1).toString())}}for(var m=n.getElementsByTagName("tbody"),h=0;h<m.length;h++){var l=m[h].id;if(l&&0==l.indexOf("table")){var s=getDesiredIndex(l,0);s>r&&(m[h].id="table_"+(s-1).toString())}}for(var v=n.getElementsByTagName("tr"),y=0;y<v.length;y++){var l=v[y].id;if(l&&l.indexOf("row")>-1){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(v[y].id="row_"+(s-1).toString()+"_"+c.toString())}}for(var f=n.getElementsByTagName("td"),D=0;D<f.length;D++){var l=f[D].id;if(l&&l.indexOf("box")>-1){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(f[D].id="box_"+(s-1).toString()+"_"+c.toString())}}for(var b=n.getElementsByTagName("input"),E=0;E<b.length;E++){var l=b[E].id;if(l)if(0==l.indexOf("deleteCategory")){var s=getDesiredIndex(l,0);s>r&&(b[E].id="deleteCategory_"+(s-1).toString())}else if(0==l.indexOf("delete")){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(b[E].id="delete_"+(s-1).toString()+"_"+c.toString())}else if(0==l.indexOf("add")){var s=getDesiredIndex(l,0);s>r&&(b[E].id="add_"+(s-1).toString())}}var T=document.getElementById("header_"+r),S=document.getElementById("label_"+r),w=document.getElementById("deleteCategory_"+r);a.parentNode.removeChild(a),T.parentNode.removeChild(T),S.parentNode.removeChild(S),w.parentNode.removeChild(w)}function addCategoryFunction(){var e=document.getElementById("addCategory");e.parentNode.removeChild(e);var t=document.getElementById("links"),r=t.getElementsByTagName("table").length,a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete Category",a.name=r,a.id="deleteCategory_"+r,a.style["float"]="right",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this category?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&deleteCategoryFunction($(this))}})}}(),t.appendChild(a);var n=document.createElement("H4");n.innerHTML="Category Name",n.style["float"]="left",n.style.marginRight="10px",n.id="label_"+r,t.appendChild(n);var o=document.createElement("TEXTAREA");o["class"]="form-control",o.style.display="block",o.id="header_"+r,o.width="33%",o.display="block",o.style.marginBottom="10px",t.appendChild(o);var i=document.createElement("TABLE");i.id="bigTable_"+r;var l=document.createElement("TBODY");l.id="table_"+r,i.appendChild(l),i.className="table table-striped";var s=new Array;s[0]="Link Title",s[1]="Hyperlink",s[2]="Action";var c=document.createElement("TR");l.appendChild(c);for(var d=0;d<s.length;d++){var u=document.createElement("TH");2>d?u.width="40%":u.width="20%",u.appendChild(document.createTextNode(s[d])),c.appendChild(u)}var c=document.createElement("TR");c.id="row_"+r+"_0";var p=document.createElement("TD"),g=document.createElement("TEXTAREA");g["class"]="form-control",g.style.display="block",g.style.width="100%",g.style.overflowY="scroll",g.style.resize="none",g.id="title_"+r+"_0",p.appendChild(g),c.appendChild(p);var p=document.createElement("TD"),m=document.createElement("TEXTAREA");m["class"]="form-control",m.style.display="block",m.style.width="100%",m.style.overflowY="scroll",m.style.resize="none",m.id="link_"+r+"_0",p.appendChild(m),c.appendChild(p);var p=document.createElement("TD");p.id="box_"+r+"_0";var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete",a.name=r,a.id="delete_"+r+"_0",a.style.marginRight="10px",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this link?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&removeRowFunction(t)}})}}(),p.appendChild(a);var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Add Link",a.id="add_"+r,a.onclick=function(){return function(e){addRowFunction($(this))}}(),p.appendChild(a),c.appendChild(p),l.appendChild(c),t.appendChild(i),t.appendChild(e)}function removeRowFunction(e){var t=e.attr("id"),r=getDesiredIndex(t,0),a=getDesiredIndex(t,1),n=document.getElementById("table_"+r),o=n.getElementsByTagName("tr").length;if(0==a&&2==o){$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Deleting this link will delete the entire category, since it is the last one left. Are you sure?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){if(e){var t=document.createElement("input");t.id="deleteCategory_"+r;var a=$(t);deleteCategoryFunction(a)}}})}else{for(var i=n.getElementsByTagName("tr"),l=0;l<i.length;l++){var s=i[l].id;if(s){var c=getDesiredIndex(s,1);c>a&&(i[l].id="row_"+r+"_"+(c-1).toString())}}for(var d=n.getElementsByTagName("td"),u=0;u<d.length;u++){var s=d[u].id;if(s){var c=getDesiredIndex(s,1);c>a&&(d[u].id="box_"+r+"_"+(c-1).toString())}}for(var p=n.getElementsByTagName("textarea"),g=0;g<p.length;g++){var s=p[g].id;if(s)if(0==s.indexOf("title")){var c=getDesiredIndex(s,1);c>a&&(p[g].id="title_"+r+"_"+(c-1).toString())}else if(0==s.indexOf("link")){var c=getDesiredIndex(s,1);c>a&&(p[g].id="link_"+r+"_"+(c-1).toString())}}for(var m=n.getElementsByTagName("input"),h=0;h<m.length;h++){var s=m[h].id;if(s&&s.indexOf("delete")>-1){var c=getDesiredIndex(s,1);c>a&&(m[h].id="delete_"+r+"_"+(c-1).toString())}}var v=document.getElementById("row_"+r+"_"+a);if(v.parentNode.removeChild(v),a==n.rows.length-1){var y=document.getElementById("box_"+r+"_"+(a-1)),e=document.createElement("INPUT");e.type="button",e.className="btn btn-lg btn-primary",e.value="Add Link",e.id="add_"+r,e.onclick=function(){return function(e){addRowFunction($(this))}}(),y.appendChild(e)}}}function addRowFunction(e){var t=e.attr("id"),r=getDesiredIndex(t,0),a=document.getElementById("table_"+r),e=document.getElementById("add_"+r);e.parentNode.removeChild(e);var n=a.getElementsByTagName("tr").length-1,o=document.createElement("TR");o.id="row_"+r+"_"+n;var i=document.createElement("TD"),l=document.createElement("TEXTAREA");l["class"]="form-control",l.style.display="block",l.style.width="100%",l.style.overflowY="scroll",l.style.resize="none",l.id="title_"+r+"_"+n,i.appendChild(l),o.appendChild(i);var i=document.createElement("TD"),s=document.createElement("TEXTAREA");s["class"]="form-control",s.style.display="block",s.style.width="100%",s.style.overflowY="scroll",s.style.resize="none",s.id="link_"+r+"_"+n,i.appendChild(s),o.appendChild(i);var i=document.createElement("TD");i.id="box_"+r+"_"+n;var e=document.createElement("INPUT");e.type="button",e.className="btn btn-lg btn-primary",e.value="Delete",e.id="delete_"+r+"_"+n,e.style.marginRight="10px",e.style.backgroundColor="red",e.style.borderColor="red",e.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this link?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&removeRowFunction(t)}})}}(),i.appendChild(e);var e=document.createElement("INPUT");e.type="button",e.className="btn btn-lg btn-primary",e.value="Add Link",e.id="add_"+r,e.onclick=function(){return function(e){addRowFunction($(this))}}(),i.appendChild(e),o.appendChild(i),a.appendChild(o)}function loadScheduleTable(){return function(){$("#scheduleAlertDiv").css("display","block");var e=localStorage.getItem("scheduleAlertString");e&&e.length>0&&(localStorage.setItem("scheduleAlertString",""),$("#scheduleAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#scheduleAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=[],r=new Parse.Query("ScheduleType");r.ascending("typeID"),r.find({success:function(e){for(var r=0;r<e.length;r++){var a=e[r].get("typeID"),n=e[r].get("fullScheduleString");t[a]=n,reverseDictionary[r]=a}var o=new Parse.Query("SchoolDayStructure");o.equalTo("isActive",1),o.ascending("schoolDayID");var i=new Array;o.find({success:function(e){var r=new Parse.Query("SchoolDayStructure");r.equalTo("isActive",0),r.descending("schoolDayID"),r.first({success:function(r){i.push(r);for(var a=0;a<e.length;a++)i.push(e[a]);$("#titleLabel").html("Available School Days ("+i.length+")");var n=document.getElementById("schedules"),o=document.createElement("TABLE"),l=document.createElement("TBODY");o.appendChild(l),o.className="table table-striped";var s=new Array;s[0]="Date",s[1]="Schedule Type",s[2]="Change Type",s[3]="Custom Action";var c=document.createElement("TR");l.appendChild(c),$("#schedules").html("");for(var a=0;a<s.length;a++){var d=document.createElement("TH");d.width="25%",d.appendChild(document.createTextNode(s[a])),c.appendChild(d)}for(var a=0;a<i.length;a++){var c=document.createElement("TR"),u=document.createElement("TD"),p=i[a].get("schoolDate").split("-"),g=new Date(p[2],p[0]-1,p[1]),m=g.toString("dddd, MMMM d, yyyy"),h=new Date;if(h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0),h>g||0==a&&0==i[a].get("isActive")?u.appendChild(document.createTextNode("INACTIVE SCHOOL DAY - ")):g.toDateString()===h.toDateString()&&(u.style.color="red"),u.appendChild(document.createTextNode(m)),c.appendChild(u),1==i[a].get("isSnow")){var v=document.createElement("TD");v.appendChild(document.createTextNode("SNOW DAY")),v.style.fontWeight="bold",c.appendChild(v)}else{var y=i[a].get("scheduleType");if("*"===y){var v=document.createElement("TD");v.appendChild(document.createTextNode("CUSTOM SCHEDULE - "+i[a].get("customString"))),v.style.fontWeight="bold",c.appendChild(v)}else{var f=t[y],v=document.createElement("TD");v.appendChild(document.createTextNode(f)),c.appendChild(v)}}if(h>!g&&(0!=a||1==i[a].get("isActive"))){var D=document.createElement("TD"),b=document.createElement("SELECT");b.name="typeSelect";var E=document.createElement("option");E.value=-1,E.text="NONE SELECTED",b.appendChild(E);for(var T=0;T<Object.keys(t).length;T++){var E=document.createElement("option");E.value=T,E.text=t[Object.keys(t)[T]],b.appendChild(E)}b.onchange=function(){var e=a;return function(t){var r=this.selectedIndex-1;BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to edit this day's schedule?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var a=reverseDictionary[r];i[e].set("scheduleType",a),i[e].set("customSchedule","None."),i[e].set("customString",""),i[e].save(null,{success:function(e){$("#spinnerDiv").html("");var t="Schedule successfully updated.";localStorage.setItem("scheduleAlertString",t),$(document).ready(loadScheduleTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3628"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),D.appendChild(b),c.appendChild(D)}else{var D=document.createElement("TD");D.appendChild(document.createTextNode("No actions available.")),c.appendChild(D)}var S=document.createElement("TD");if(2>a&&0==i[a].get("isSnow")){var w=document.createElement("INPUT");w.type="button",w.className="btn btn-lg btn-primary",w.value="Snow Day",w.name=a,w.style.marginBottom="10px",w.onclick=function(){var e=a;return function(t){e!=i.length-1?BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to make this day a snow day? This will affect all schedules after this date.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){t&&(0===e&&(window.showYesterday=!1),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("snowDay",{ID:i[e].get("schoolDayID")},{success:function(){$("#spinnerDiv").html("");var e="Schedule successfully updated.";localStorage.setItem("scheduleAlertString",e),$(document).ready(loadScheduleTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3692"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}}):BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"You can't go back one day from here! This is the last day in the available queue."})}}(),S.appendChild(w)}if(h>!g&&(0!=a||1==i[a].get("isActive"))){var C=document.createElement("INPUT");C.type="button",C.className="btn btn-lg btn-primary",C.value="Edit Custom Schedule",C.name=a,C.style.marginRight="10px",C.onclick=function(){var e=a;return function(t){var r=i[e].get("schoolDate").split("-"),a=new Date(r[2],r[0]-1,r[1]),n=a.toString("dddd, MMMM d, yyyy");BootstrapDialog.show({title:"Edit Custom Schedule",message:function(t){var r=$("<form></form>"),a=$('<input type="text" style="width:100%;">');r.append(n+'<br><br>Schedule Name (i.e. "Day D, Wildcat Way Period")').append(a);var o=$('<textarea maxlength="200" rows="14" style="overflow-y: scroll; resize: none; width:100%;"></textarea>');return"*"===i[e].get("scheduleType")?(a.val(i[e].get("customString")),o.val(i[e].get("customSchedule"))):o.val("Period 1: \nPeriod 2: \nPeriod 3: \nPeriod 4: \n1st: \n2nd: \n3rd: \nPeriod 6: \nPeriod 7: "),t.setData("schedule",o),t.setData("title",a),r.append("<br><br>Schedule<br><br>").append(o),r},closable:!1,draggable:!0,buttons:[{label:"Cancel",action:function(e){e.close()}},{label:"Save",cssClass:"btn-primary",action:function(e){var t=e.getData("title").val(),r=e.getData("schedule").val();t&&r?BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to save this custom schedule?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(a){if(a){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var n=new Parse.Query("SchoolDayStructure");n.equalTo("schoolDayID",parseInt(localStorage.getItem("customID"))),n.first({success:function(a){a.set("customString",t),a.set("customSchedule",r),a.set("scheduleType","*"),a.save(null,{success:function(){$("#spinnerDiv").html(""),localStorage.setItem("scheduleAlertString","Schedule successfully updated."),e.close(),$(document).ready(loadScheduleTable())},error:function(t){errorFunction(t.code.toString()+" - "+t.message.toString(),"ParseError","Script 1002"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),e.close()}})},error:function(t){errorFunction(t.code.toString()+" - "+t.message.toString(),"ParseError","Script 1013"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),e.close()}})}}}):BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"No data entered!"})}}]})}}(),S.appendChild(C)}else 2>a&&S.appendChild(document.createTextNode("No actions available."));c.appendChild(S),l.appendChild(c),n.appendChild(o)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3758"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3769"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3780"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}var imageFile=null,daysArray="",registerData=null,userCount=0,userArray=new Array,existingUserArray=new Array,testObject=null,customDate=null,customString=null,customID=null,reverseDictionary=new Array,groupsArray=new Array,showYesterday=!0,UserRegisterStructure=Parse.Object.extend("UserRegisterStructure",{create:function(e,t,r,a,n,o,i){e&&t&&n&&o&&r?r!=a?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your e-mail addresses do not match!"}),$("#signupButton").html("Register")):o!=i?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your passwords do not match!"}),$("#signupButton").html("Register")):n.indexOf(" ")>-1?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your username cannot contain any spaces!"}),$("#signupButton").html("Register")):o.indexOf(" ")>-1?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your password cannot contain any spaces!"}),$("#signupButton").html("Register")):($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),$("#signupButton").html("Checking availability..."),Parse.Cloud.run("validateUser",{username:n,email:r},{success:function(a){a>0?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"This username or e-mail has already been used. Please try again."}),$("#signupButton").html("Register"),$("#spinnerDiv").html("")):Parse.Cloud.run("encryptPassword",{password:o},{success:function(a){for(var o=new UserRegisterStructure,i="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;11>s;s++)i+=l.charAt(Math.floor(Math.random()*l.length));o.save({firstName:e.toString(),lastName:t.toString(),email:r.toString(),username:n.toString(),password:a,key:i},{success:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Success",message:"You have successfully registered your WildcatConnect account! A member of administration will approve your request and you will then receive a confirmation e-mail.",onhide:function(e){location.reload()}}),$("#spinnerDiv").html("")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),$("#signupButton").html("Register")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),$("#signupButton").html("Register")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),$("#signupButton").html("Register")}})):(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Please ensure you have correctly filled out all required fields!"}),$("#signupButton").html("Register"))}}),NewsArticleStructure=Parse.Object.extend("NewsArticleStructure",{create:function(e,t,r,a,n){if(e&&t&&r&&a&&n){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var o=new Parse.Query("NewsArticleStructure");o.descending("articleID"),o.first({success:function(o){if(o)var i=o.get("articleID")+1;else var i=0;var l=new NewsArticleStructure,s=0;s=!Parse.User.current()||"Developer"!==Parse.User.current().get("userType")&&"Administration"!==Parse.User.current().get("userType")?0:1;var c=Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName"),d=Parse.User.current().get("email");null===window.imageFile?l.save({articleID:i,authorString:t,contentURLString:n,dateString:r,hasImage:0,imageFile:null,likes:0,summaryString:a,titleString:e,views:0,isApproved:s,userString:c,email:d},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Wildcat News Story successfully submitted for approval. Please allow 1-2 days for processing."),window.location.replace("./index")},error:function(e){alert(e),$("#spinnerDiv").html("")}}):l.save({articleID:i,authorString:t,contentURLString:n,dateString:r,hasImage:1,imageFile:window.imageFile,likes:0,summaryString:a,titleString:e,views:0,isApproved:s,userString:c,email:d},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Wildcat News Story successfully submitted for approval. Please allow 1-2 days for processing."),window.location.replace("./index")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),ExtracurricularUpdateStructure=Parse.Object.extend("ExtracurricularUpdateStructure",{create:function(e,t){if(0!==e.length&&t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=new Parse.Query("ExtracurricularUpdateStructure");r.descending("extracurricularUpdateID"),r.first({success:function(r){if(r)var a=r.get("extracurricularUpdateID")+1;else var a=0;for(var n=new Array,o=0;o<e.length;o++){var i=new ExtracurricularUpdateStructure,l=new Date;i.set({extracurricularUpdateID:a+o,extracurricularID:e[o],messageString:t,postDate:l}),n.push(i),Parse.Object.saveAll(n,{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Group update successfully posted."),window.location.replace("./index")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),CommunityServiceStructure=Parse.Object.extend("CommunityServiceStructure",{create:function(e,t,r,a,n,o){if(r=new Date(t+" "+r),t=new Date(t),n=new Date(a+" "+n),a=new Date(a),!e||!t||!r||!a||!r||!o||t>a||t.getDate()===a.getDate()&&r>n)BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"});else{$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var i=new Parse.Query("CommunityServiceStructure");i.descending("communityServiceID"),i.first({success:function(i){if(i)var l=i.get("communityServiceID")+1;else var l=0;var s=new CommunityServiceStructure,c=0;c=!Parse.User.current()||"Developer"!==Parse.User.current().get("userType")&&"Administration"!==Parse.User.current().get("userType")?0:1;var d=Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName"),u=Parse.User.current().get("email"),p=new Date(t.getFullYear(),t.getMonth(),t.getDate(),r.getHours(),r.getMinutes(),0,0),g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),n.getHours(),n.getMinutes(),0,0);s.save({communityServiceID:l,commTitleString:e,commSummaryString:o,startDate:p,endDate:g,isApproved:c,userString:d,email:u},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Community service update successfully posted."),window.location.replace("./index")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}}),EventStructure=Parse.Object.extend("EventStructure",{create:function(e,t,r,a,n){r=new Date(r+" "+a);var o=new Date;if(o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),0,0),e&&t&&r&&a&&n&&!(o>r)){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var i=new EventStructure,l=0;l=!Parse.User.current()||"Developer"!==Parse.User.current().get("userType")&&"Administration"!==Parse.User.current().get("userType")?0:1;var s=Parse.User.current().get("email"),c=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),0,0);i.save({titleString:e,locationString:t,eventDate:c,messageString:n,isApproved:l,userString:Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName"),email:s},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Event successfully submitted for approval. Please allow 1-2 days for processing."),window.location.replace("./index")},error:function(e,t){errorFunction(t.code.toString()+" - "+t.message.toString(),"ParseError","Script 333"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),PollStructure=Parse.Object.extend("PollStructure",{create:function(e,t,r,a){if(e&&t&&r&&a){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');for(var n={},o=0;o<a.length;o++)n[a[o].toString()]="0";var i=new Parse.Query("PollStructure");i.descending("pollID"),i.first({success:function(a){if(a)var o=a.get("pollID")+1;else var o=0;var i=new PollStructure;i.save({pollID:parseInt(o).toString(),pollTitle:e,pollQuestion:t,daysActive:parseInt(r),totalResponses:"0",pollMultipleChoices:n},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Poll successfully posted."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 380"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 391"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),AlertStructure=Parse.Object.extend("AlertStructure",{create:function(e,t,r,a,n,o){if(n=new Date(a+" "+n),a=new Date(n),e&&t&&r&&("time"!==r||a&&n)){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var i=new Parse.Query("AlertStructure");i.descending("alertID"),
i.first({success:function(n){var i=n.get("alertID"),l=new AlertStructure,s=new Array;s[0]="January",s[1]="February",s[2]="March",s[3]="April",s[4]="May",s[5]="June",s[6]="July",s[7]="August",s[8]="September",s[9]="October",s[10]="November",s[11]="December";var c=(new Date,moment()),d=moment(a);if(c.diff(d,"seconds")>0)BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"You can't send an alert in the past. No one would ever see it. :("}),$("#spinnerDiv").html("");else if("now"===r){var d=moment(),u=d.format("MMMM "),p=d.format(", h:mm A"),g=parseInt(d.format("d")),m=ordinal_suffix_of(g),h=u+m+p;l.save({alertID:i+1,titleString:e,authorString:t,dateString:h,isReady:1,views:0,alertTime:null,contentString:o,hasTime:0},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Alert successfully posted."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 460"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else if("time"===r){var d=moment(a),u=d.format("MMMM "),p=d.format(", h:mm A"),g=parseInt(d.format("d")),m=ordinal_suffix_of(g),h=u+m+p;l.save({alertID:i+1,titleString:e,authorString:t,dateString:h,isReady:0,views:0,alertTime:a,contentString:o,hasTime:1},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Alert successfully posted."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 488"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 501"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),ExtracurricularStructure=Parse.Object.extend("ExtracurricularStructure",{create:function(e,t){if(e&&t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=new Parse.Query("ExtracurricularStructure");r.descending("extracurricularID"),r.equalTo("titleString",e),r.count({success:function(r){if(r>0)BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"A group with this name has already been registered. Please enter a different name."}),$("#spinnerDiv").html("");else{var a=new Parse.Query("ExtracurricularStructure");a.descending("extracurricularID"),a.first({success:function(r){var a=r.get("extracurricularID"),n=new ExtracurricularStructure,o=Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName");n.save({extracurricularID:a+1,titleString:e,descriptionString:t,hasImage:0,meetingIDs:window.daysArray.join(""),userString:o},{success:function(e){Parse.User.current().fetch({success:function(e){var t=e.get("ownedEC");t.push(a+1),console.log(t),e.save({ownedEC:t},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("groupAlertString","Group successfully registered."),window.location.replace("./groupManage")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 554"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 565"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 576"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 588"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}});$(function(){Parse.$=jQuery,Parse.initialize("cLBOvwh6ZTQYex37DSwxL1Cvg34MMiRWYAB4vqs0","tTcV5Ns1GFdDda44FCcG5XHBDMbLA1sxRUzSnDgW"),$("#logOut").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to log out and end your session?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&(Parse.User.logOut(),window.location.replace("./login"))}})}),$("#changePassword").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to change your password?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&Parse.User.requestPasswordReset(Parse.User.current().get("email"),{success:function(){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Success! Check your e-mail for password reset instructions."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 652"),$("#spinnerDiv").html(""),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}})}),$(".form-signin").submit(function(){event.preventDefault();var e=$(this).serializeArray(),t=e[0].value,r=e[1].value;$("#logIn").html("Signing in..."),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.User.logIn(t,r,{success:function(e){$("#spinnerDiv").html("");var t=Parse.User.current().get("verified");0===t?(localStorage.setItem("key",Parse.User.current().get("key")),localStorage.setItem("username",Parse.User.current().get("username")),window.location.replace("./verify")):window.location.replace("./index")},error:function(e,t){errorFunction(t.code.toString()+" - "+t.message.toString(),"ParseError","Script 692"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred logging in with those credentials. Please try again."}),$("#spinnerDiv").html("")}})}),$(".form-horizontal").submit(function(){event.preventDefault();var e=$(this).serializeArray(),t=new UserRegisterStructure;t.create(e[0].value,e[1].value,e[2].value,e[3].value,e[4].value,e[5].value,e[6].value)}),$(".cancel").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to go back? Any unsaved progress will be lost.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&history.back()}})}),$(".saveMessage").click(function(){event.preventDefault();var e=$("#message").val(),t=new Parse.Query("SpecialKeyStructure");t.equalTo("key","appMessage"),t.first({success:function(t){t.set("value",e),t.save(null,{success:function(){location.reload()},error:function(e){}})},error:function(e){}})}),$(".cancel-errors").click(function(){event.preventDefault(),history.back()}),$(".cancel-verify").click(function(){event.preventDefault(),window.location.replace("./login")}),$(".cancel-schedule").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to go back? Any unsaved progress will be lost.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&window.location.replace("./index")}})}),$(".form-add-news").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this Wildcat News Story for administrative approval?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new NewsArticleStructure;a.create(r[0].value,r[1].value,document.getElementById("date").value,r[2].value,r[3].value)}}})}),$(".form-add-groupUpdate").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to post this group update?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new ExtracurricularUpdateStructure;a.create(window.groupsArray,r[r.length-1].value)}}})}),$(".form-add-community").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this Community Service Update?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new CommunityServiceStructure;a.create(r[0].value,r[1].value,r[2].value,r[3].value,r[4].value,r[5].value)}}})}),$(".form-add-event").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this event for administrative approval?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new EventStructure;a.create(r[0].value,r[1].value,r[2].value,r[3].value,r[4].value)}}})}),$(".form-add-poll").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this User Poll?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new PollStructure;a.create(r[0].value,r[1].value,r[2].value,choicesArray)}}})}),$(".form-add-alert").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this alert? It will be live to all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new AlertStructure;a.create(r[0].value,Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName"),r[1].value,r[2].value,r[3].value,r[4].value)}}})}),$(".form-add-groupRegister").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to register this new group?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new ExtracurricularStructure;a.create(r[0].value,r[1].value)}}})}),$(".form-verify").submit(function(){event.preventDefault();var e=$(this).serializeArray(),t=e[0].value;if(t===localStorage.getItem("key").toString()){var r=new Parse.Query(Parse.User);r.equalTo("username",localStorage.getItem("username").toString()),r.first({success:function(e){Parse.User.current().save({verified:1},{success:function(){Parse.User.logOut(),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Success",message:"Registration complete! Welcome to WildcatConnect! Please re-enter your login credentials.",onhide:function(e){window.location.replace("./login")}})},error:function(e){Parse.User.logOut(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1057"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"An error occurred. Please try again."}),window.location.replace("./login")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1068"),$("#spinnerDiv").html(""),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"An error occurred. Please try again."}),window.location.replace("./login")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Incorrect registration key."}),Parse.User.logOut(),window.location.replace("./login")}),$(".forgot").click(function(){event.preventDefault(),window.location.href="./forgot"}),$("#dayGen").click(function(){event.preventDefault(),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("SDSgen",null,{success:function(){$("#spinnerDiv").html("");var e="Day successfully generated.";localStorage.setItem("scheduleAlertString",e),$(document).ready(loadScheduleTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1718"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}),$("#commGen").click(function(){event.preventDefault(),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e="",t=new Parse.Query("CommunityServiceStructure");t.equalTo("isApproved",1),t.ascending("startDate");new Array;t.find({success:function(t){for(var r=0;r<t.length;r++){r>0&&(e+="\n\n"),e=e+t[r].get("commTitleString").toUpperCase()+"\n";var a=t[r].get("startDate"),n=a.toString("dddd, MMMM d, yyyy  @ h:mm");e=e+"STARTS - "+n+"\n";var a=t[r].get("endDate"),n=a.toString("dddd, MMMM d, yyyy @ h:mm");e=e+"ENDS - "+n+"\n",e+=t[r].get("commSummaryString")}BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Text Generation",message:e}),$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1718"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}),$(".saveLunch").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to save this breakfast and lunch information?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){if(e){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Array,r=new Parse.Query("SchoolDayStructure");r.equalTo("isActive",1),r.ascending("schoolDayID"),r.find({success:function(e){for(var r=0;r<e.length;r++){var a="#b_"+r.toString(),n=$(a).val(),o="#l_"+r.toString(),i=$(o).val();e[r].set("breakfastString",n),e[r].set("lunchString",i),t.push(e[r])}Parse.Object.saveAll(t,{success:function(e){var t="Breakfasts and lunches successfully updated.";localStorage.setItem("lunchAlertString",t),$("#spinnerDiv").html(""),window.location.replace("./lunch")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1129"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1140"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}),$(".saveLinks").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to save these links? They will be live for all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){if(e){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("UsefulLinkArray");t.ascending("index"),t.find({success:function(e){Parse.Object.destroyAll(e,{success:function(){for(var t=document.getElementById("links"),r=t.getElementsByTagName("table").length,a=new Array,n=!0,o=0;r>o;o++){var i=Parse.Object.extend("UsefulLinkArray"),l=new i,s="#header_"+o.toString(),c=$(s).val();l.set("headerTitle",c),l.set("index",o);for(var d=document.getElementById("table_"+o.toString()).rows,u=[],p=0;p<d.length-1;p++){var g={},m="#title_"+o+"_"+p,h=$(m).val();if(!h){n=!1,BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have correctly filled all fields!"});$(m).css("border-color");$(m).css("border-color","red");break}g.titleString=h,$(m).css("border-color","rgb(51, 51, 51");var v="#link_"+o+"_"+p,y=$(v).val();if(!y){n=!1,BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have correctly filled all fields!"}),$(v).css("border-color","red");break}g.URLString=y,$(v).css("border-color","rgb(51, 51, 51"),u.push(g)}if(1!=n)break;l.set("linksArray",u),a.push(l)}1==n?Parse.Object.saveAll(a,{success:function(e){var t="Links successfully updated.";localStorage.setItem("linksAlertString",t),$("#spinnerDiv").html(""),window.location.replace("./links")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1238"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}):Parse.Object.saveAll(e,{success:function(e){$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1253"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1265"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1276"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})})});