function errorFunction(e,t,r){var a=Parse.Object.extend("ErrorStructure"),n=new a;n.set("deviceToken","Web Client"),n.set("nameString","JavaScript Error"),n.set("infoString","Message = "+e+" - File = "+t+" - Line = "+r),n.set("version","Latest web release."),n.set("username",Parse.User.current().get("username")),n.save()}function start(e){return function(){window.imageFile=new Parse.File("image.png",e)}}function startTwo(e){return function(){window.daysArray=e}}function startThree(e){return function(){window.groupsArray=e}}function customView(){return function(){var e=localStorage.getItem("customDate").split("-"),t=new Date(e[2],e[0]-1,e[1]),r=t.toString("dddd, MMMM d, yyyy");$("#topLabel").html("Custom Schedule - "+r),$("#customArea").val(localStorage.getItem("customString")),$("#scheduleDescription").val(localStorage.getItem("customDescription"))}}function loadNewUserTable(){return function(){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e=new Parse.Query("UserRegisterStructure");e.ascending("lastName"),e.find({success:function(e){$("#newLabel").html("New User Requests ("+e.length+")");var t=document.getElementById("newUsers"),r=document.createElement("TABLE"),a=document.createElement("TBODY");$("#newUsers").html(""),r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Last Name",n[1]="First Name",n[2]="E-Mail",n[3]="Action";var o=document.createElement("TR");a.appendChild(o);for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="25%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}window.userArray=new Array;for(var i=0;i<e.length;i++){window.userArray.push(e[i]);var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("lastName"))),o.appendChild(s);var c=document.createElement("TD");c.appendChild(document.createTextNode(e[i].get("firstName"))),o.appendChild(c);var d=document.createElement("TD");d.innerHTML='<a href="mailto:'+e[i].get("email")+'">'+e[i].get("email")+"</a>",o.appendChild(d);var u=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="approveUser btn btn-lg btn-primary",g.value="Approve",g.name=i,g.style.marginRight="10px",g.onclick=function(){var e=i;return function(t){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to approve this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=window.userArray[e],a=r.get("password"),n=r.get("key");Parse.Cloud.run("decryptPassword",{password:a},{success:function(e){Parse.Cloud.run("registerUser",{username:r.get("username"),password:e,email:r.get("email"),firstName:r.get("firstName"),lastName:r.get("lastName"),key:n},{success:function(){$("#spinnerDiv").html("");var e="User approved!";localStorage.setItem("userAlertString",e),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1431"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1442"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),u.appendChild(g);var p=document.createElement("INPUT");p.type="button",p.className="btn btn-lg btn-primary",p.value="Deny",g.name=i,p.style.marginRight="10px",p.style.backgroundColor="red",p.style.borderColor="red",p.onclick=function(){var e=i;return function(t){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to deny this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=window.userArray[e],a=new Parse.Query("UserRegisterStructure");a.equalTo("username",r.get("username")),a.first({success:function(e){e.destroy({success:function(e){$("#spinnerDiv").html("");var t="User successfully denied account request.";localStorage.setItem("userAlertString",t),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1500"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1511"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),u.appendChild(p),o.appendChild(u),a.appendChild(o),t.appendChild(r)}},error:function(e){alert(e)}})}}function loadExistingUserTable(){return function(){$("#userAlertDiv").css("display","block");var e=localStorage.getItem("userAlertString");e&&e.length>0&&(localStorage.setItem("userAlertString",""),$("#userAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#userAlertDiv").delay(5e3).fadeOut(500));var t=new Parse.Query("User");t.ascending("lastName"),t.find({success:function(e){$("#existingLabel").html("Existing Users ("+e.length+")");var t=document.getElementById("existingUsers"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="userTable";var n=new Array;n[0]="Last Name",n[1]="First Name",n[2]="E-Mail",n[3]="User Type",n[4]="Change Type",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#existingUsers").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="17%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}window.existingUserArray=new Array;for(var i=0;i<e.length;i++){window.existingUserArray.push(e[i]);var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("lastName"))),o.appendChild(s);var c=document.createElement("TD");c.appendChild(document.createTextNode(e[i].get("firstName"))),o.appendChild(c);var d=document.createElement("TD");d.innerHTML='<a href="mailto:'+e[i].get("email")+'">'+e[i].get("email")+"</a>",o.appendChild(d);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("userType"))),o.appendChild(u);var g=document.createElement("TD"),p=document.createElement("SELECT");p.name="typeSelect";var m=document.createElement("option");m.value=-1,m.text="NONE SELECTED",p.appendChild(m);for(var h=["Developer","Administration","Faculty","Lunch Manager"],v=0;v<h.length;v++){var m=document.createElement("option");m.value=v,m.text=h[v],p.appendChild(m)}p.onchange=function(){var t=i;return function(r){var a=this.selectedIndex-1;BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to update this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){if(r){var n=h[a];$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("updateType",{username:e[t].get("username"),type:n},{success:function(){$("#spinnerDiv").html("");var e="User successfully updated.";localStorage.setItem("userAlertString",e),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1659"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),g.appendChild(p),o.appendChild(g);var y=document.createElement("TD"),D=document.createElement("INPUT");D.type="button",D.className="btn btn-lg btn-primary",D.value="Delete",D.name=i,D.style.marginRight="10px",D.style.backgroundColor="red",D.style.borderColor="red",D.onclick=function(){var e=i;return function(t){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this user?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=window.existingUserArray[e];r.get("username")!=Parse.User.current().get("username").toString()?($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("deleteUser",{username:r.get("username")},{success:function(){$("#spinnerDiv").html("");var e="User successfully deleted.";$("#userAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#userAlertDiv").delay(5e3).fadeOut(500),$(document).ready(loadNewUserTable()),$(document).ready(loadExistingUserTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1718"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})):(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Whoops! You cannot delete yourself as a user."}),$("#spinnerDiv").html(""))}}})}}(),y.appendChild(D),o.appendChild(y),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){alert(e)}})}}function loadLunchTable(){return function(){$("#lunchAlertDiv").css("display","block");var e=localStorage.getItem("lunchAlertString");e&&e.length>0&&(localStorage.setItem("lunchAlertString",""),$("#lunchAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#lunchAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("SchoolDayStructure");t.equalTo("isActive",1),t.ascending("schoolDayID");new Array;t.find({success:function(e){$("#titleLabel").html("Available School Days ("+e.length+")");var t=document.getElementById("schedules"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Date",n[1]="Breakfast",n[2]="Lunch";var o=document.createElement("TR");a.appendChild(o),$("#schedules").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");0==i?l.width="20%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].get("schoolDate").split("-"),d=new Date(c[2],c[0]-1,c[1]),u=d.toString("dddd, MMMM d, yyyy");s.appendChild(document.createTextNode(u)),o.appendChild(s);var g=document.createElement("TD"),p=document.createElement("TEXTAREA");p.value=e[i].get("breakfastString"),p["class"]="form-control",p.style.display="block",p.style.width="100%",p.style.overflowY="scroll",p.style.resize="none",p.id="b_"+i,p.maxLength=80,g.appendChild(p),o.appendChild(g);var m=document.createElement("TD"),h=document.createElement("TEXTAREA");h.value=e[i].get("lunchString"),h["class"]="form-control",h.style.display="block",h.style.width="100%",h.style.overflowY="scroll",h.style.resize="none",h.id="l_"+i,h.maxLength=80,m.appendChild(h),o.appendChild(m),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1845"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadNewsTable(){return function(){$("#newsAlertDiv").css("display","block");var e=localStorage.getItem("newsAlertString");e&&e.length>0&&(localStorage.setItem("newsAlertString",""),$("#newsAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#newsAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("NewsArticleStructure");t.equalTo("isApproved",0),t.ascending("createdAt");new Array;t.find({success:function(e){$("#titleLabel").html("Pending Wildcat News Requests ("+e.length+")");var t=document.getElementById("newsRequests"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Date Submitted",n[1]="Author",n[2]="Summary",n[3]="Content",n[4]="Action";var o=document.createElement("TR");a.appendChild(o),$("#newsRequests").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");3!=i?l.width="10%":l.width="60%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].createdAt,d=c.toString("dddd, MMMM d, yyyy @ h:mm tt");s.appendChild(document.createTextNode(d)),o.appendChild(s);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("authorString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("summaryString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("contentURLString"))),o.appendChild(u);var g=document.createElement("TD"),p=document.createElement("INPUT");p.type="button",p.className="approveUser btn btn-lg btn-primary",p.value="Approve",p.name=i,p.style.marginBottom="10px",p.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to approve this Wildcat News Story? It will be live to all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].set("isApproved",1),e[t].save({success:function(){$("#spinnerDiv").html("");var e="Story successfully approved.";localStorage.setItem("newsAlertString",e),$(document).ready(loadNewsTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1969"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),g.appendChild(p);var m=document.createElement("INPUT");m.type="button",m.className="btn btn-lg btn-primary",m.value="Deny",p.name=i,m.style.marginRight="10px",m.style.backgroundColor="red",m.style.borderColor="red",m.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to deny this Wildcat News Story?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Story successfully denied.";localStorage.setItem("newsAlertString",e),$(document).ready(loadNewsTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2020"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),g.appendChild(m),o.appendChild(g),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2047"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadEventTable(){return function(){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var e=new Parse.Query("EventStructure");e.equalTo("isApproved",0),e.ascending("createdAt");new Array;e.find({success:function(e){$("#titleLabel").html("Pending Event Requests ("+e.length+")");var t=document.getElementById("eventRequests"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Title",n[1]="Date",n[2]="Location",n[3]="Message",n[4]="User",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#eventRequests").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");3!=i?l.width="12%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(s);var c=document.createElement("TD"),d=e[i].get("eventDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("locationString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("messageString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("userString"))),o.appendChild(s);var g=document.createElement("TD"),p=document.createElement("INPUT");p.type="button",p.className="approveUser btn btn-lg btn-primary",p.value="Approve",p.name=i,p.style.marginBottom="10px",p.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to approve this event? It will be live to all app users.?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].set("isApproved",1),e[t].save({success:function(){$("#spinnerDiv").html("");var e="Event successfully approved.";localStorage.setItem("eventAlertString",e),$(document).ready(loadEventTable()),$(document).ready(loadExistingEventTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2169"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),g.appendChild(p);var m=document.createElement("INPUT");m.type="button",m.className="btn btn-lg btn-primary",m.value="Deny",p.name=i,m.style.marginRight="10px",m.style.backgroundColor="red",m.style.borderColor="red",m.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to deny this event?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Event successfully denied.";localStorage.setItem("eventAlertString",e),$(document).ready(loadEventTable()),$(document).ready(loadExistingEventTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2221"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),g.appendChild(m),o.appendChild(g),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2248"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadExistingEventTable(){return function(){$("#eventAlertDiv").css("display","block");var e=localStorage.getItem("eventAlertString");e&&e.length>0&&(localStorage.setItem("eventAlertString",""),$("#eventAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#eventAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("EventStructure");t.equalTo("isApproved",1),t.ascending("eventDate");new Array;t.find({success:function(e){$("#existingLabel").html("Current Active Events ("+e.length+")");var t=document.getElementById("currentEvents"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="eventTable";var n=new Array;n[0]="Title",n[1]="Date",n[2]="Location",n[3]="Message",n[4]="User",n[5]="Action";var o=document.createElement("TR");a.appendChild(o),$("#currentEvents").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");3!=i?l.width="12%":l.width="40%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(s);var c=document.createElement("TD"),d=e[i].get("eventDate"),u=d.toString("dddd, MMMM d, yyyy @ h:mm tt");c.appendChild(document.createTextNode(u)),o.appendChild(c);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("locationString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("messageString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("userString"))),o.appendChild(s);var g=document.createElement("TD"),p=document.createElement("INPUT");p.type="button",p.className="btn btn-lg btn-primary",p.value="Delete",p.style.marginRight="10px",p.style.backgroundColor="red",p.style.borderColor="red",p.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this event?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Event successfully deleted.";localStorage.setItem("eventAlertString",e),$(document).ready(loadEventTable()),$(document).ready(loadExistingEventTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2379"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),g.appendChild(p),o.appendChild(g),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2406"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}function loadGroupTable(){return function(){$("#groupAlertDiv").css("display","block");var e=localStorage.getItem("groupAlertString");e&&e.length>0&&(localStorage.setItem("groupAlertString",""),$("#groupAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#groupAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("ExtracurricularStructure");t.ascending("titleString");new Array;t.find({success:function(e){$("#titleLabel").html("Currently Registered Groups ("+e.length+")");var t=document.getElementById("groups"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped",r.id="groupTable";var n=new Array;n[0]="Title",n[1]="Message",n[2]="Action";var o=document.createElement("TR");a.appendChild(o),$("#groups").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="33%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("titleString"))),o.appendChild(s);var s=document.createElement("TD");s.appendChild(document.createTextNode(e[i].get("descriptionString"))),o.appendChild(s);var c=document.createElement("TD"),d=document.createElement("INPUT");d.type="button",d.className="btn btn-lg btn-primary",d.value="Delete",d.style.marginRight="10px",d.style.backgroundColor="red",d.style.borderColor="red",d.onclick=function(){var t=i;return function(r){BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this group?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(r){r&&($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Group successfully deleted.";localStorage.setItem("groupAlertString",e),$(document).ready(loadGroupTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2514"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}})}}(),c.appendChild(d),o.appendChild(c),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function loadErrorTable(){return function(){$("#errorAlertDiv").css("display","block");var e=localStorage.getItem("errorAlertString");e&&e.length>0&&(localStorage.setItem("errorAlertString",""),$("#errorAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#errorAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("ErrorStructure");t.descending("createdAt"),t.find({success:function(e){$("#titleLabel").html("Recent iOS/Web App Errors and Crashes ("+e.length+")");var t=document.getElementById("errors"),r=document.createElement("TABLE"),a=document.createElement("TBODY");r.appendChild(a),r.className="table table-striped";var n=new Array;n[0]="Date",n[1]="Name",n[2]="Message",n[3]="Device Token",n[4]="Username",n[5]="Version",n[6]="Action";var o=document.createElement("TR");a.appendChild(o),$("#errors").html("");for(var i=0;i<n.length;i++){var l=document.createElement("TH");l.width="14%",l.appendChild(document.createTextNode(n[i])),o.appendChild(l)}for(var i=0;i<e.length;i++){var o=document.createElement("TR"),s=document.createElement("TD"),c=e[i].createdAt,d=c.toString("dddd, MMMM d, yyyy @ h:mm tt");s.appendChild(document.createTextNode(d)),o.appendChild(s);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("nameString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("infoString"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("deviceToken"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("username"))),o.appendChild(u);var u=document.createElement("TD");u.appendChild(document.createTextNode(e[i].get("version"))),o.appendChild(u);var u=document.createElement("TD"),g=document.createElement("INPUT");g.type="button",g.className="btn btn-lg btn-primary",g.value="Delete",g.name=i,g.style.marginBottom="10px",g.style.backgroundColor="red",g.style.borderColor="red",g.onclick=function(){var t=i;return function(r){e[t].destroy({success:function(){$("#spinnerDiv").html("");var e="Error successfully deleted.";localStorage.setItem("errorAlertString",e),$(document).ready(loadErrorTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 2639"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}(),u.appendChild(g),o.appendChild(u),a.appendChild(o),t.appendChild(r)}$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function loadLinksTable(){return function(){$("#linksAlertDiv").css("display","block");var e=localStorage.getItem("linksAlertString");e&&e.length>0&&(localStorage.setItem("linksAlertString",""),$("#linksAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#linksAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("UsefulLinkArray");t.ascending("index"),t.find({success:function(e){var t=document.getElementById("links");$("#links").html("");for(var r=0;r<e.length;r++){var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete Category",a.name=r,a.id="deleteCategory_"+r,a.style["float"]="right",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this category?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&deleteCategoryFunction(t)}})}}(),t.appendChild(a);var n=document.createElement("H4");n.innerHTML="Category Name",n.style["float"]="left",n.style.marginRight="10px",n.id="label_"+r,t.appendChild(n);var o=document.createElement("TEXTAREA");o.value=e[r].get("headerTitle"),o["class"]="form-control",o.style.display="block",o.id="header_"+r,o.width="33%",o.display="block",o.style.marginBottom="10px",t.appendChild(o);
var i=document.createElement("TABLE");i.id="bigTable_"+r;var l=document.createElement("TBODY");l.id="table_"+r,i.appendChild(l),i.className="table table-striped";var s=new Array;s[0]="Link Title",s[1]="Hyperlink",s[2]="Action";var c=document.createElement("TR");l.appendChild(c);for(var d=0;d<s.length;d++){var u=document.createElement("TH");2>d?u.width="40%":u.width="20%",u.appendChild(document.createTextNode(s[d])),c.appendChild(u)}for(var g=e[r].get("linksArray"),p=0;p<g.length;p++){var c=document.createElement("TR");c.id="row_"+r+"_"+p;var m=g[p],h=document.createElement("TD"),v=document.createElement("TEXTAREA");v.value=m.titleString,v["class"]="form-control",v.style.display="block",v.style.width="100%",v.style.overflowY="scroll",v.style.resize="none",v.id="title_"+r+"_"+p,h.appendChild(v),c.appendChild(h);var h=document.createElement("TD"),y=document.createElement("TEXTAREA");y.value=m.URLString,y["class"]="form-control",y.style.display="block",y.style.width="100%",y.style.overflowY="scroll",y.style.resize="none",y.id="link_"+r+"_"+p,h.appendChild(y),c.appendChild(h);var h=document.createElement("TD");h.id="box_"+r+"_"+p;var a=document.createElement("INPUT");if(a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete",a.name=r,a.id="delete_"+r+"_"+p,a.style.marginRight="10px",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this link?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&removeRowFunction(t)}})}}(),h.appendChild(a),p==g.length-1){var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Add Link",a.id="add_"+r,a.onclick=function(){return function(e){addRowFunction($(this))}}(),h.appendChild(a),c.appendChild(h),l.appendChild(c)}c.appendChild(h),l.appendChild(c),t.appendChild(i)}}var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Add a New Category",a.name=r,a.style.marginBottom="10px",a.id="addCategory",a.onclick=function(){return function(e){addCategoryFunction()}}(),t.appendChild(a),$("#spinnerDiv").html("")},error:function(e){$("#spinnerDiv").html(""),alert(e)}})}}function getDesiredIndex(e,t){if(0==t){var r,a=e.indexOf("_"),n=e.substring(a+1),o=n.indexOf("_");r=-1==o?n:n.substring(0,o);var i=parseInt(r);return i}if(1==t){var a=e.indexOf("_"),n=e.substring(a+1),o=n.indexOf("_"),r=n.substring(o+1),i=parseInt(r);return i}return-1}function deleteCategoryFunction(e){for(var t=e.attr("id"),r=getDesiredIndex(t,0),a=document.getElementById("bigTable_"+r),n=document.getElementById("links"),o=n.getElementsByTagName("textarea"),i=0;i<o.length;i++){var l=o[i].id;if(l)if(0==l.indexOf("title")){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(o[i].id="title_"+(s-1).toString()+"_"+c.toString())}else if(0==l.indexOf("link")){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(o[i].id="link_"+(s-1).toString()+"_"+c.toString())}else if(0==l.indexOf("header")){var s=getDesiredIndex(l,0);s>r&&(o[i].id="header_"+(s-1).toString())}}for(var d=n.getElementsByTagName("h4"),u=0;u<d.length;u++){var l=d[u].id;if(l&&0==l.indexOf("label")){var s=getDesiredIndex(l,0);s>r&&(d[u].id="label_"+(s-1).toString())}}for(var g=n.getElementsByTagName("table"),p=0;p<g.length;p++){var l=g[p].id;if(l&&0==l.indexOf("bigTable")){var s=getDesiredIndex(l,0);s>r&&(g[p].id="bigTable_"+(s-1).toString())}}for(var m=n.getElementsByTagName("tbody"),h=0;h<m.length;h++){var l=m[h].id;if(l&&0==l.indexOf("table")){var s=getDesiredIndex(l,0);s>r&&(m[h].id="table_"+(s-1).toString())}}for(var v=n.getElementsByTagName("tr"),y=0;y<v.length;y++){var l=v[y].id;if(l&&l.indexOf("row")>-1){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(v[y].id="row_"+(s-1).toString()+"_"+c.toString())}}for(var D=n.getElementsByTagName("td"),f=0;f<D.length;f++){var l=D[f].id;if(l&&l.indexOf("box")>-1){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(D[f].id="box_"+(s-1).toString()+"_"+c.toString())}}for(var E=n.getElementsByTagName("input"),b=0;b<E.length;b++){var l=E[b].id;if(l)if(0==l.indexOf("deleteCategory")){var s=getDesiredIndex(l,0);s>r&&(E[b].id="deleteCategory_"+(s-1).toString())}else if(0==l.indexOf("delete")){var s=getDesiredIndex(l,0),c=getDesiredIndex(l,1);s>r&&(E[b].id="delete_"+(s-1).toString()+"_"+c.toString())}else if(0==l.indexOf("add")){var s=getDesiredIndex(l,0);s>r&&(E[b].id="add_"+(s-1).toString())}}var T=document.getElementById("header_"+r),S=document.getElementById("label_"+r),w=document.getElementById("deleteCategory_"+r);a.parentNode.removeChild(a),T.parentNode.removeChild(T),S.parentNode.removeChild(S),w.parentNode.removeChild(w)}function addCategoryFunction(){var e=document.getElementById("addCategory");e.parentNode.removeChild(e);var t=document.getElementById("links"),r=t.getElementsByTagName("table").length,a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete Category",a.name=r,a.id="deleteCategory_"+r,a.style["float"]="right",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this category?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&deleteCategoryFunction($(this))}})}}(),t.appendChild(a);var n=document.createElement("H4");n.innerHTML="Category Name",n.style["float"]="left",n.style.marginRight="10px",n.id="label_"+r,t.appendChild(n);var o=document.createElement("TEXTAREA");o["class"]="form-control",o.style.display="block",o.id="header_"+r,o.width="33%",o.display="block",o.style.marginBottom="10px",t.appendChild(o);var i=document.createElement("TABLE");i.id="bigTable_"+r;var l=document.createElement("TBODY");l.id="table_"+r,i.appendChild(l),i.className="table table-striped";var s=new Array;s[0]="Link Title",s[1]="Hyperlink",s[2]="Action";var c=document.createElement("TR");l.appendChild(c);for(var d=0;d<s.length;d++){var u=document.createElement("TH");2>d?u.width="40%":u.width="20%",u.appendChild(document.createTextNode(s[d])),c.appendChild(u)}var c=document.createElement("TR");c.id="row_"+r+"_0";var g=document.createElement("TD"),p=document.createElement("TEXTAREA");p["class"]="form-control",p.style.display="block",p.style.width="100%",p.style.overflowY="scroll",p.style.resize="none",p.id="title_"+r+"_0",g.appendChild(p),c.appendChild(g);var g=document.createElement("TD"),m=document.createElement("TEXTAREA");m["class"]="form-control",m.style.display="block",m.style.width="100%",m.style.overflowY="scroll",m.style.resize="none",m.id="link_"+r+"_0",g.appendChild(m),c.appendChild(g);var g=document.createElement("TD");g.id="box_"+r+"_0";var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Delete",a.name=r,a.id="delete_"+r+"_0",a.style.marginRight="10px",a.style.backgroundColor="red",a.style.borderColor="red",a.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this link?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&removeRowFunction(t)}})}}(),g.appendChild(a);var a=document.createElement("INPUT");a.type="button",a.className="btn btn-lg btn-primary",a.value="Add Link",a.id="add_"+r,a.onclick=function(){return function(e){addRowFunction($(this))}}(),g.appendChild(a),c.appendChild(g),l.appendChild(c),t.appendChild(i),t.appendChild(e)}function removeRowFunction(e){var t=e.attr("id"),r=getDesiredIndex(t,0),a=getDesiredIndex(t,1),n=document.getElementById("table_"+r),o=n.getElementsByTagName("tr").length;if(0==a&&2==o){$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Deleting this link will delete the entire category, since it is the last one left. Are you sure?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){if(e){var t=document.createElement("input");t.id="deleteCategory_"+r;var a=$(t);deleteCategoryFunction(a)}}})}else{for(var i=n.getElementsByTagName("tr"),l=0;l<i.length;l++){var s=i[l].id;if(s){var c=getDesiredIndex(s,1);c>a&&(i[l].id="row_"+r+"_"+(c-1).toString())}}for(var d=n.getElementsByTagName("td"),u=0;u<d.length;u++){var s=d[u].id;if(s){var c=getDesiredIndex(s,1);c>a&&(d[u].id="box_"+r+"_"+(c-1).toString())}}for(var g=n.getElementsByTagName("textarea"),p=0;p<g.length;p++){var s=g[p].id;if(s)if(0==s.indexOf("title")){var c=getDesiredIndex(s,1);c>a&&(g[p].id="title_"+r+"_"+(c-1).toString())}else if(0==s.indexOf("link")){var c=getDesiredIndex(s,1);c>a&&(g[p].id="link_"+r+"_"+(c-1).toString())}}for(var m=n.getElementsByTagName("input"),h=0;h<m.length;h++){var s=m[h].id;if(s&&s.indexOf("delete")>-1){var c=getDesiredIndex(s,1);c>a&&(m[h].id="delete_"+r+"_"+(c-1).toString())}}var v=document.getElementById("row_"+r+"_"+a);if(v.parentNode.removeChild(v),a==n.rows.length-1){var y=document.getElementById("box_"+r+"_"+(a-1)),e=document.createElement("INPUT");e.type="button",e.className="btn btn-lg btn-primary",e.value="Add Link",e.id="add_"+r,e.onclick=function(){return function(e){addRowFunction($(this))}}(),y.appendChild(e)}}}function addRowFunction(e){var t=e.attr("id"),r=getDesiredIndex(t,0),a=document.getElementById("table_"+r),e=document.getElementById("add_"+r);e.parentNode.removeChild(e);var n=a.getElementsByTagName("tr").length-1,o=document.createElement("TR");o.id="row_"+r+"_"+n;var i=document.createElement("TD"),l=document.createElement("TEXTAREA");l["class"]="form-control",l.style.display="block",l.style.width="100%",l.style.overflowY="scroll",l.style.resize="none",l.id="title_"+r+"_"+n,i.appendChild(l),o.appendChild(i);var i=document.createElement("TD"),s=document.createElement("TEXTAREA");s["class"]="form-control",s.style.display="block",s.style.width="100%",s.style.overflowY="scroll",s.style.resize="none",s.id="link_"+r+"_"+n,i.appendChild(s),o.appendChild(i);var i=document.createElement("TD");i.id="box_"+r+"_"+n;var e=document.createElement("INPUT");e.type="button",e.className="btn btn-lg btn-primary",e.value="Delete",e.id="delete_"+r+"_"+n,e.style.marginRight="10px",e.style.backgroundColor="red",e.style.borderColor="red",e.onclick=function(){return function(e){var t=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to delete this link?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&removeRowFunction(t)}})}}(),i.appendChild(e);var e=document.createElement("INPUT");e.type="button",e.className="btn btn-lg btn-primary",e.value="Add Link",e.id="add_"+r,e.onclick=function(){return function(e){addRowFunction($(this))}}(),i.appendChild(e),o.appendChild(i),a.appendChild(o)}function loadScheduleTable(){return function(){$("#scheduleAlertDiv").css("display","block");var e=localStorage.getItem("scheduleAlertString");e&&e.length>0&&(localStorage.setItem("scheduleAlertString",""),$("#scheduleAlertDiv").html('<div class="alert alert-success fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">Close</a><strong>'+e+"</strong></div>"),$("#scheduleAlertDiv").delay(5e3).fadeOut(500)),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=[],r=new Parse.Query("ScheduleType");r.ascending("typeID"),r.find({success:function(e){for(var r=0;r<e.length;r++){var a=e[r].get("typeID"),n=e[r].get("fullScheduleString");t[a]=n,reverseDictionary[r]=a}var o=new Parse.Query("SchoolDayStructure");o.equalTo("isActive",1),o.ascending("schoolDayID");var i=new Array;o.find({success:function(e){var r=new Parse.Query("SchoolDayStructure");r.equalTo("isActive",0),r.descending("schoolDayID"),r.first({success:function(r){i.push(r);for(var a=0;a<e.length;a++)i.push(e[a]);$("#titleLabel").html("Available School Days ("+i.length+")");var n=document.getElementById("schedules"),o=document.createElement("TABLE"),l=document.createElement("TBODY");o.appendChild(l),o.className="table table-striped";var s=new Array;s[0]="Date",s[1]="Schedule Type",s[2]="Change Type",s[3]="Custom Action";var c=document.createElement("TR");l.appendChild(c),$("#schedules").html("");for(var a=0;a<s.length;a++){var d=document.createElement("TH");d.width="25%",d.appendChild(document.createTextNode(s[a])),c.appendChild(d)}for(var a=0;a<i.length;a++){var c=document.createElement("TR"),u=document.createElement("TD"),g=i[a].get("schoolDate").split("-"),p=new Date(g[2],g[0]-1,g[1]),m=p.toString("dddd, MMMM d, yyyy"),h=new Date;h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0),h>p||0==a&&0==i[a].get("isActive")?u.appendChild(document.createTextNode("INACTIVE SCHOOL DAY - ")):p.toDateString()===h.toDateString()&&(u.style.color="red"),u.appendChild(document.createTextNode(m)),c.appendChild(u);var v=i[a].get("scheduleType");if("*"===v){var y=document.createElement("TD");y.appendChild(document.createTextNode("CUSTOM SCHEDULE - "+i[a].get("customString"))),y.style.fontWeight="bold",c.appendChild(y)}else{var D=t[v],y=document.createElement("TD");y.appendChild(document.createTextNode(D)),c.appendChild(y)}if(h>!p&&(0!=a||1==i[a].get("isActive"))){var f=document.createElement("TD"),E=document.createElement("SELECT");E.name="typeSelect";var b=document.createElement("option");b.value=-1,b.text="NONE SELECTED",E.appendChild(b);for(var T=0;T<Object.keys(t).length;T++){var b=document.createElement("option");b.value=T,b.text=t[Object.keys(t)[T]],E.appendChild(b)}E.onchange=function(){var e=a;return function(t){var r=this.selectedIndex-1;BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to edit this day's schedule?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var a=reverseDictionary[r];i[e].set("scheduleType",a),i[e].set("customSchedule","None."),i[e].set("customString",""),i[e].save(null,{success:function(e){$("#spinnerDiv").html("");var t="Schedule successfully updated.";localStorage.setItem("scheduleAlertString",t),$(document).ready(loadScheduleTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3628"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}}(),f.appendChild(E),c.appendChild(f)}else{var f=document.createElement("TD");f.appendChild(document.createTextNode("No actions available.")),c.appendChild(f)}var S=document.createElement("TD");if(2>a){var w=document.createElement("INPUT");w.type="button",w.className="btn btn-lg btn-primary",w.value="Snow Day",w.name=a,w.style.marginBottom="10px",w.onclick=function(){var e=a;return function(t){e!=i.length-1?BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to make this day a snow day? This will affect all schedules after this date.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){t&&(0===e&&(window.showYesterday=!1),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.Cloud.run("snowDay",{ID:i[e].get("schoolDayID")},{success:function(){$("#spinnerDiv").html("");var e="Schedule successfully updated.";localStorage.setItem("scheduleAlertString",e),$(document).ready(loadScheduleTable())},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3692"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}))}}):BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"You can't go back one day from here! This is the last day in the available queue."})}}(),S.appendChild(w),c.appendChild(S)}if(h>!p&&(0!=a||1==i[a].get("isActive"))){var C=document.createElement("INPUT");C.type="button",C.className="btn btn-lg btn-primary",C.value="Edit Custom Schedule",C.name=a,C.style.marginRight="10px",C.onclick=function(){var e=a;return function(t){"*"===i[e].get("scheduleType")?localStorage.setItem("customString",i[e].get("customSchedule")):localStorage.setItem("customString","Period 1: \nPeriod 2: \nPeriod 3: \nPeriod 4: \n1st: \n2nd: \n3rd: \nPeriod 6: \nPeriod 7: "),localStorage.setItem("customID",i[e].get("schoolDayID")),localStorage.setItem("customDate",i[e].get("schoolDate")),localStorage.setItem("customDescription",i[e].get("customString")),window.location.replace("./custom")}}(),S.appendChild(C)}c.appendChild(S),l.appendChild(c),n.appendChild(o)}$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3758"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3769"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 3780"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}var imageFile=null,daysArray="",registerData=null,userCount=0,userArray=new Array,existingUserArray=new Array,testObject=null,customDate=null,customString=null,customID=null,reverseDictionary=new Array,groupsArray=new Array,showYesterday=!0,UserRegisterStructure=Parse.Object.extend("UserRegisterStructure",{create:function(e,t,r,a,n,o,i){e&&t&&n&&o&&r?r!=a?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your e-mail addresses do not match!"}),$("#signupButton").html("Register")):o!=i?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your passwords do not match!"}),$("#signupButton").html("Register")):n.indexOf(" ")>-1?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your username cannot contain any spaces!"}),$("#signupButton").html("Register")):o.indexOf(" ")>-1?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Your password cannot contain any spaces!"}),$("#signupButton").html("Register")):($("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),$("#signupButton").html("Checking availability..."),Parse.Cloud.run("validateUser",{username:n,email:r},{success:function(a){a>0?(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"This username or e-mail has already been used. Please try again."}),$("#signupButton").html("Register"),$("#spinnerDiv").html("")):Parse.Cloud.run("encryptPassword",{password:o},{success:function(a){for(var o=new UserRegisterStructure,i="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;11>s;s++)i+=l.charAt(Math.floor(Math.random()*l.length));o.save({firstName:e.toString(),lastName:t.toString(),email:r.toString(),username:n.toString(),password:a,key:i},{success:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Success",message:"You have successfully registered your WildcatConnect account! A member of administration will approve your request and you will then receive a confirmation e-mail.",onhide:function(e){location.reload()}}),$("#spinnerDiv").html("")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),$("#signupButton").html("Register")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),$("#signupButton").html("Register")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html(""),$("#signupButton").html("Register")}})):(BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"Please ensure you have correctly filled out all required fields!"}),$("#signupButton").html("Register"))}}),NewsArticleStructure=Parse.Object.extend("NewsArticleStructure",{create:function(e,t,r,a,n){if(e&&t&&r&&a&&n){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var o=new Parse.Query("NewsArticleStructure");o.descending("articleID"),o.first({success:function(o){if(o)var i=o.get("articleID")+1;else var i=0;var l=new NewsArticleStructure;null===window.imageFile?l.save({articleID:i,authorString:t,contentURLString:n,dateString:r,hasImage:0,imageFile:null,likes:0,summaryString:a,titleString:e,views:0,isApproved:0},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Wildcat News Story successfully submitted for approval. Please allow 1-2 days for processing."),window.location.replace("./index")},error:function(e){alert(e),$("#spinnerDiv").html("")}}):l.save({articleID:i,authorString:t,contentURLString:n,dateString:r,hasImage:1,imageFile:window.imageFile,likes:0,summaryString:a,titleString:e,views:0,isApproved:0},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Wildcat News Story successfully submitted for approval. Please allow 1-2 days for processing."),window.location.replace("./index")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),ExtracurricularUpdateStructure=Parse.Object.extend("ExtracurricularUpdateStructure",{create:function(e,t){if(0!==e.length&&t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=new Parse.Query("ExtracurricularUpdateStructure");r.descending("extracurricularUpdateID"),r.first({success:function(r){if(r)var a=r.get("extracurricularUpdateID")+1;else var a=0;for(var n=new Array,o=0;o<e.length;o++){var i=new ExtracurricularUpdateStructure;i.set({extracurricularUpdateID:a+o,extracurricularID:e[o],messageString:t}),n.push(i),Parse.Object.saveAll(n,{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Group update successfully posted."),window.location.replace("./index")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),CommunityServiceStructure=Parse.Object.extend("CommunityServiceStructure",{create:function(e,t,r,a,n,o){if(r=new Date(t+" "+r),t=new Date(t),n=new Date(a+" "+n),a=new Date(a),!e||!t||!r||!a||!r||!o||t>a||t.getDate()===a.getDate()&&r>n)BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"});else{$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var i=new Parse.Query("CommunityServiceStructure");i.descending("communityServiceID"),i.first({success:function(i){if(i)var l=i.get("communityServiceID")+1;else var l=0;var s=new CommunityServiceStructure,c=new Date(t.getFullYear(),t.getMonth(),t.getDate(),r.getHours(),r.getMinutes(),0,0),d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),n.getHours(),n.getMinutes(),0,0);s.save({communityServiceID:l,commTitleString:e,commSummaryString:o,startDate:c,endDate:d},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Community service update successfully posted."),window.location.replace("./index")},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}}),EventStructure=Parse.Object.extend("EventStructure",{create:function(e,t,r,a,n){r=new Date(r+" "+a),console.log(r);var o=new Date;if(o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),0,0),e&&t&&r&&a&&n&&!(o>r)){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var i=new EventStructure,l=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),0,0);i.save({titleString:e,locationString:t,eventDate:l,messageString:n,isApproved:0,userString:Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName")},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Event successfully submitted for approval. Please allow 1-2 days for processing."),window.location.replace("./index")},error:function(e,t){errorFunction(t.code.toString()+" - "+t.message.toString(),"ParseError","Script 333"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),PollStructure=Parse.Object.extend("PollStructure",{create:function(e,t,r,a){if(e&&t&&r&&a){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');for(var n={},o=0;o<a.length;o++)n[a[o].toString()]="0";var i=new Parse.Query("PollStructure");i.descending("pollID"),i.first({success:function(a){if(a)var o=a.get("pollID")+1;else var o=0;var i=new PollStructure;i.save({pollID:parseInt(o).toString(),pollTitle:e,pollQuestion:t,daysActive:parseInt(r),totalResponses:"0",pollMultipleChoices:n},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Poll successfully posted."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 380"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 391"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),AlertStructure=Parse.Object.extend("AlertStructure",{create:function(e,t,r,a,n,o){if(n=new Date(a+" "+n),a=new Date(a),e&&t&&r&&("time"!==r||a&&n)){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var i=new Parse.Query("AlertStructure");i.descending("alertID"),i.first({success:function(i){var l=i.get("alertID"),s=new AlertStructure,c=new Array;c[0]="January",c[1]="February",c[2]="March",c[3]="April",c[4]="May",c[5]="June",c[6]="July",c[7]="August",c[8]="September",c[9]="October",c[10]="November",c[11]="December";var d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),n.getHours(),n.getMinutes(),0,0),u=new Date;if(u>d&&"time"===r)BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Whoops!",message:"You can't send an alert in the past. No one would ever see it. :("}),$("#spinnerDiv").html("");else if("now"===r){var g=c[u.getMonth()]+" "+u.getDate().toString()+", "+u.getFullYear().toString();s.save({alertID:l+1,titleString:e,authorString:t,dateString:g,isReady:1,views:0,alertTime:null,contentString:o,hasTime:0},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Alert successfully posted."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 460"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else if("time"===r){var g=c[d.getMonth()]+" "+d.getDate().toString()+", "+d.getFullYear().toString();s.save({alertID:l+1,titleString:e,authorString:t,dateString:g,isReady:0,views:0,alertTime:d,contentString:o,hasTime:1},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Alert successfully posted."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 488"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 501"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}}),ExtracurricularStructure=Parse.Object.extend("ExtracurricularStructure",{create:function(e,t){if(e&&t){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var r=new Parse.Query("ExtracurricularStructure");r.descending("extracurricularID"),r.equalTo("titleString",e),r.count({success:function(r){if(r>0)BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"A group with this name has already been registered. Please enter a different name."}),$("#spinnerDiv").html("");else{var a=new Parse.Query("ExtracurricularStructure");a.descending("extracurricularID"),a.first({success:function(r){var a=r.get("extracurricularID"),n=new ExtracurricularStructure;n.save({extracurricularID:a+1,titleString:e,descriptionString:t,hasImage:0,meetingIDs:window.daysArray.join("")},{success:function(e){var t=Parse.User.current().get("ownedEC");t.push(e.get("extracurricularID")),Parse.User.current().save({ownedEC:t},{success:function(e){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Group successfully registered."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 554"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,
title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 565"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 576"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 588"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have filled out all required fields!"})}});$(function(){Parse.$=jQuery,Parse.initialize("cLBOvwh6ZTQYex37DSwxL1Cvg34MMiRWYAB4vqs0","tTcV5Ns1GFdDda44FCcG5XHBDMbLA1sxRUzSnDgW"),$("#logOut").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to log out and end your session?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&(Parse.User.logOut(),window.location.replace("./login"))}})}),$("#changePassword").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to change your password?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&Parse.User.requestPasswordReset(Parse.User.current().get("email"),{success:function(){$("#spinnerDiv").html(""),localStorage.setItem("alertString","Success! Check your e-mail for password reset instructions."),window.location.replace("./index")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 652"),$("#spinnerDiv").html(""),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}})}),$(".form-signin").submit(function(){event.preventDefault();var e=$(this).serializeArray(),t=e[0].value,r=e[1].value;$("#logIn").html("Signing in..."),$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>'),Parse.User.logIn(t,r,{success:function(e){$("#spinnerDiv").html("");var t=Parse.User.current().get("verified");0===t?(localStorage.setItem("key",Parse.User.current().get("key")),localStorage.setItem("username",Parse.User.current().get("username")),window.location.replace("./verify")):window.location.replace("./index")},error:function(e,t){errorFunction(t.code.toString()+" - "+t.message.toString(),"ParseError","Script 692"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred logging in with those credentials. Please try again."}),$("#spinnerDiv").html("")}})}),$(".form-horizontal").submit(function(){event.preventDefault();var e=$(this).serializeArray(),t=new UserRegisterStructure;t.create(e[0].value,e[1].value,e[2].value,e[3].value,e[4].value,e[5].value,e[6].value)}),$(".cancel").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to go back? Any unsaved progress will be lost.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&history.back()}})}),$(".cancel-errors").click(function(){event.preventDefault(),history.back()}),$(".cancel-verify").click(function(){event.preventDefault(),window.location.replace("./login")}),$(".cancel-schedule").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to go back? Any unsaved progress will be lost.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){e&&history.back()}})}),$(".form-add-news").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this Wildcat News Story for administrative approval?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new NewsArticleStructure;a.create(r[0].value,r[1].value,document.getElementById("date").value,r[2].value,r[3].value)}}})}),$(".form-add-groupUpdate").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to post this group update?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new ExtracurricularUpdateStructure;a.create(window.groupsArray,r[r.length-1].value)}}})}),$(".form-add-community").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this Community Service Update?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new CommunityServiceStructure;a.create(r[0].value,r[1].value,r[2].value,r[3].value,r[4].value,r[5].value)}}})}),$(".form-add-event").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this event for administrative approval?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new EventStructure;a.create(r[0].value,r[1].value,r[2].value,r[3].value,r[4].value)}}})}),$(".form-add-poll").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this User Poll?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new PollStructure;a.create(r[0].value,r[1].value,r[2].value,choicesArray)}}})}),$(".form-add-alert").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to submit this alert? It will be live to all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new AlertStructure;a.create(r[0].value,Parse.User.current().get("firstName")+" "+Parse.User.current().get("lastName"),r[1].value,r[2].value,r[3].value,r[4].value)}}})}),$(".form-add-groupRegister").submit(function(){event.preventDefault();var e=$(this);BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to register this new group?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(t){if(t){var r=e.serializeArray(),a=new ExtracurricularStructure;a.create(r[0].value,r[1].value)}}})}),$(".form-add-custom").submit(function(){event.preventDefault();var e=$(this).serializeArray(),t=e[0].value,r=e[1].value;r?BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to save this custom schedule?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){if(e){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var a=new Parse.Query("SchoolDayStructure");a.equalTo("schoolDayID",parseInt(localStorage.getItem("customID"))),a.first({success:function(e){e.set("customString",t),e.set("customSchedule",r),e.set("scheduleType","*"),e.save(null,{success:function(){$("#spinnerDiv").html(""),localStorage.setItem("alertStringSchedule","Schedule successfully updated."),window.location.replace("./schedule")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1002"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1013"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}}):BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"No data entered!"})}),$(".form-verify").submit(function(){event.preventDefault();var e=$(this).serializeArray(),t=e[0].value;if(t===localStorage.getItem("key").toString()){var r=new Parse.Query(Parse.User);r.equalTo("username",localStorage.getItem("username").toString()),r.first({success:function(e){Parse.User.current().save({verified:1},{success:function(){Parse.User.logOut(),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Success",message:"Registration complete! Welcome to WildcatConnect! Please re-enter your login credentials.",onhide:function(e){window.location.replace("./login")}})},error:function(e){Parse.User.logOut(),errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1057"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"An error occurred. Please try again."}),window.location.replace("./login")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1068"),$("#spinnerDiv").html(""),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"An error occurred. Please try again."}),window.location.replace("./login")}})}else BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Incorrect registration key."}),Parse.User.logOut(),window.location.replace("./login")}),$(".saveLunch").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to save this breakfast and lunch information?",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){if(e){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Array,r=new Parse.Query("SchoolDayStructure");r.equalTo("isActive",1),r.ascending("schoolDayID"),r.find({success:function(e){for(var r=0;r<e.length;r++){var a="#b_"+r.toString(),n=$(a).val(),o="#l_"+r.toString(),i=$(o).val();e[r].set("breakfastString",n),e[r].set("lunchString",i),t.push(e[r])}Parse.Object.saveAll(t,{success:function(e){var t="Breakfasts and lunches successfully updated.";localStorage.setItem("lunchAlertString",t),$("#spinnerDiv").html(""),window.location.replace("./lunch")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1129"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1140"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})}),$(".saveLinks").click(function(){event.preventDefault(),BootstrapDialog.confirm({title:"Confirmation",message:"Are you sure you want to save these links? They will be live for all app users.",type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-primary",callback:function(e){if(e){$("#spinnerDiv").html('<a><img src="./../spinner.gif" alt="Logo" width="40" style="vertical-align: middle; padding-top:12px; padding-left:10px;"/></a>');var t=new Parse.Query("UsefulLinkArray");t.ascending("index"),t.find({success:function(e){Parse.Object.destroyAll(e,{success:function(){for(var t=document.getElementById("links"),r=t.getElementsByTagName("table").length,a=new Array,n=!0,o=0;r>o;o++){var i=Parse.Object.extend("UsefulLinkArray"),l=new i,s="#header_"+o.toString(),c=$(s).val();l.set("headerTitle",c),l.set("index",o);for(var d=document.getElementById("table_"+o.toString()).rows,u=[],g=0;g<d.length-1;g++){var p={},m="#title_"+o+"_"+g,h=$(m).val();if(!h){n=!1,BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have correctly filled all fields!"});$(m).css("border-color");$(m).css("border-color","red");break}p.titleString=h,$(m).css("border-color","rgb(51, 51, 51");var v="#link_"+o+"_"+g,y=$(v).val();if(!y){n=!1,BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Please ensure you have correctly filled all fields!"}),$(v).css("border-color","red");break}p.URLString=y,$(v).css("border-color","rgb(51, 51, 51"),u.push(p)}if(1!=n)break;l.set("linksArray",u),a.push(l)}1==n?Parse.Object.saveAll(a,{success:function(e){var t="Links successfully updated.";localStorage.setItem("linksAlertString",t),$("#spinnerDiv").html(""),window.location.replace("./links")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1238"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}}):Parse.Object.saveAll(e,{success:function(e){$("#spinnerDiv").html("")},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1253"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1265"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})},error:function(e){errorFunction(e.code.toString()+" - "+e.message.toString(),"ParseError","Script 1276"),BootstrapDialog.show({type:BootstrapDialog.TYPE_DEFAULT,title:"Error",message:"Error occurred. Please try again."}),$("#spinnerDiv").html("")}})}}})})});